@*<link rel="stylesheet" href="~/Content/NotificationCenter.css" />*@

<script type="text/template" id="ChooseUserTemplate">
    <tr>
        <td class="center"><input type="checkbox" class="mail-checkbox" data-bind="attr: { value: UserName }, checked: $root.Message().checkedUserName"></td>
        <td data-bind="text:FullName"></td>
        <td data-bind="text:UserName"></td>
        @*<td data-bind="text:Code"></td>*@
        <td data-bind="text:OfficeName"></td>
        <td data-bind="text:TitleName"></td>
    </tr>
</script>
<div class="wrapper-notification-center">
    <div class="modal fade modal-p90 in modal-dialog" id="NotificationCenter" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        @Html.AntiForgeryToken()
        @*<div class="modal-dialog">
            <div class="modal-content">*@
        @*<div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel" data-bind="text: Title"></h4>
            </div>*@
        <div class="modal-body p0">
            <div class="row">
                <div class="" id="sidebar" data-bind="attr:{ class: IsMobile() && !IsBack() ? 'hidden' : 'col-sm-6 col-md-4 p0 pl15' }">
                    <div class="mini-sidebar">
                        <div id="tab">
                            <ul>
                                <li data-bind="attr:{class: CurrentMode() == 0 ? 'active' : ''}"><a href="javascript://" class="btn btn-block" data-bind="click: ChangeMode.bind($data, 0)"><i class="fa fa fa-envelope-o"></i> Mailbox</a></li>
                                <li data-bind="attr:{class: CurrentMode() == 1 ? 'active' : ''}"><a href="javascript://" class="btn btn-block" data-bind="click: ChangeMode.bind($data, 1)"><i class="fa fa-bell-o"></i> Notification</a></li>
                            </ul>
                        </div>

                        <div class="headder" data-bind="visible: CurrentMode() == 0">
                            <ul>
                                <li>
                                    <a href="javascript://" class="btn toggle-sidebar-menu" data-bind="click: ShowSidebar"><i class="fa fa-bars"></i></a>
                                </li>
                            </ul>
                            <div>
                                <form class="search" data-bind="submit: $root.Message().searchSubmit">
                                    <div class="form-group">
                                        <div class="input-group">
                                            <input type="text" class="form-control" placeholder="Find email" data-bind="value: $root.Message().keyword">
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="submit">
                                                    <i class="fa fa-search" data-bind="visible: !$root.MyNotification().IsSearching()" style="display: block;"></i>
                                                    <i class="fa fa-spinner fa-pulse" data-bind="visible: $root.MyNotification().IsSearching"></i>
                                                </button>
                                            </span>
                                        </div><!-- /input-group -->
                                    </div>
                                    @*</div>*@
                                </form>
                            </div>
                        </div>
                        <div data-bind="visible: CurrentMode() == 0">
                            <ul class="message-sidebar">
                                <li data-bind="attr: {class: $root.CurrentMessagePage() == 'create' ? 'active' : '' }">
                                    <a href="javascript://" class="btn" title="Compose" data-bind="click: $root.MessageSelectPage.bind($data, 'create')">
                                        <i class="fa fa-plus-circle"></i>
                                        <span data-bind="visible: IsShowSidebar">Compose</span>
                                    </a>
                                </li>
                                <li data-bind="attr: {class: $root.CurrentMessagePage() == 'inbox' ? 'active' : '' }">
                                    <a href="javascript://" class="btn" title="Inbox" data-bind="click: $root.MessageSelectPage.bind($data, 'inbox')">
                                        <i class="fa fa-download"></i>
                                        <span data-bind="visible: IsShowSidebar">Inbox</span>
                                        @*<span data-bind="text: $root.Message().totalInboxUnread()" class="badge badge-danger"></span>*@
                                    </a>
                                </li>
                                <li data-bind="attr: {class: $root.CurrentMessagePage() == 'star' ? 'active' : '' }">
                                    <a href="javascript://" class="btn" title="Starred mail" data-bind="click: $root.MessageSelectPage.bind($data, 'star')">
                                        <i class="fa fa-star"></i>
                                        <span data-bind="visible: IsShowSidebar">Starred mail</span>
                                        @*<span data-bind="text: $root.Message().totalStarUnread()" class="badge badge-danger"></span>*@
                                    </a>
                                </li>
                                <li data-bind="attr: {class: $root.CurrentMessagePage() == 'draft' ? 'active' : '' }">
                                    <a href="javascript://" class="btn" title="Draft" data-bind="click: $root.MessageSelectPage.bind($data, 'draft')">
                                        <i class="fa fa-envelope-o"></i>
                                        <span data-bind="visible: IsShowSidebar">Income</span>
                                        @*<span data-bind="text: $root.Message().totalDraft()" class="badge badge-danger"></span>*@
                                    </a>
                                </li>
                                <li data-bind="attr: {class: $root.CurrentMessagePage() == 'sent' ? 'active' : '' }">
                                    <a href="javascript://" class="btn" title="Sent messages" data-bind="click: $root.MessageSelectPage.bind($data, 'sent')">
                                        <i class="fa fa-upload"></i>
                                        <span data-bind="visible: IsShowSidebar">Sent messages</span>
                                    </a>
                                </li>
                                <li data-bind="attr: {class: $root.CurrentMessagePage() == 'trash' ? 'active' : '' }">
                                    <a href="javascript://" class="btn" title="Trash bin" data-bind="click: $root.MessageSelectPage.bind($data, 'trash')">
                                        <i class="fa fa-trash-o"></i>
                                        <span data-bind="visible: IsShowSidebar">Trash</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="sidebar-content" data-bind="visible: CurrentMode() == 0, attr:{ 'min-height': $root.messageMinHeight }">
                        <div class="content p0">
                            <h4 class="title main-title" data-bind="text: $root.CurrentMessagePage() == 'create' ? 'Tạo mới thư' : $root.CurrentMessagePage() == 'inbox' ? 'Hộp thư đến' : $root.CurrentMessagePage() == 'star' ? 'Thư gắn sao' : $root.CurrentMessagePage() == 'draft' ? 'Thư nháp' :  $root.CurrentMessagePage() == 'sent' ? 'Thư đã gửi' : 'Thùng rác'"></h4>
                            <ul class="sidebar-action">
                                <li>
                                    <!-- Split button -->
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-default btn-sm" data-bind="click: $root.ChangeCheckAllMessage">
                                            <i class="clip-checkbox-checked" data-bind="visible: $root.Message().checkAllMessage"></i>
                                            <i class="clip-checkbox-unchecked" data-bind="visible: !$root.Message().checkAllMessage()"></i>
                                        </button>
                                        <button type="button" class="btn btn-default btn-sm dropdown-toggle  pr-pdl-10 pr-pdr-10" data-toggle="dropdown" aria-expanded="false">
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu" role="menu">
                                            <li data-bind="visible: $root.Message().listType() != 'draft', click: $root.Message().changeCheckboxFilter.bind($data, 'unRead')"><a href="javascript://" class="pr-icon-left"><i class="fa fa-envelope"></i><span>Unread</span></a></li>
                                            <li data-bind="visible: $root.Message().listType() != 'draft', click: $root.Message().changeCheckboxFilter.bind($data, 'readed')"><a href="javascript://" class="pr-icon-left"><i class="fa fa-envelope-o"></i><span>Read</span></a></li>
                                            <li data-bind="visible: $root.Message().listType() != 'star', click:  $root.Message().changeCheckboxFilter.bind($data, 'star')"><a href="javascript://" class="pr-icon-left"><i class="fa fa-star color-orange"></i><span>Starred mail</span></a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li data-bind="visible: $root.Message().checkedMessageId().length > 0" class="pull-right pr-mgl-10">
                                    <!-- Single button -->
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                           Action <i class="fa fa-angle-down"></i>
                                        </button>
                                        <ul class="dropdown-menu" role="menu" style="right: 0; left: auto;">
                                            <li data-bind="visible: $root.Message().listType() != 'draft', click: $root.Message().markReaded.bind($data, false)">
                                                <a href="javascript://">
                                                    <i class="fa fa-envelope"></i> Mark unread
                                                </a>
                                            </li>
                                            <li data-bind="visible: $root.Message().listType() != 'draft', click: $root.Message().markReaded.bind($data, true)">
                                                <a href="javascript://">
                                                    <i class="fa fa-envelope-o"></i> Mark read
                                                </a>
                                            </li>
                                            <li data-bind="visible: $root.Message().listType() == 'trash'">
                                                <a href="javascript://" data-bind="click: $root.Message().undoMoveTrash.bind($data)">
                                                    <i class="fa fa-refresh"></i> Restore
                                                </a>
                                            </li>
                                            <li>
                                                <a href="javascript://" data-bind="click: $root.Message().deleteMessage.bind($data, false)">
                                                    <i class="fa fa-trash-o"></i> <span data-bind="text: $root.Message().listType() == 'trash' ? 'Permanently delete' : 'Delete '">Delete</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                                <li class="pull-right mr5">
                                    <div class="btn-group">
                                        <a class="btn btn-sm btn-default dropdown-toggle" href="#" data-toggle="dropdown">
                                            <span data-bind="text: $root.Message().filterTitle"></span> <i class="fa fa-angle-down"></i>
                                        </a>
                                        <ul class="dropdown-menu" style="right: 0; left: auto;">
                                            <li data-bind="click: $root.Message().changeFilter.bind($data, 'all')">
                                                <a href="javascript://">
                                                    All
                                                </a>
                                            </li>
                                            <li data-bind="visible: $root.Message().listType() != 'draft', click: $root.Message().changeFilter.bind($data, 'unRead')">
                                                <a href="javascript://">
                                                    <i class="fa fa-envelope"></i> Unread
                                                </a>
                                            </li>
                                            <li data-bind="visible: $root.Message().listType() != 'draft', click: $root.Message().changeFilter.bind($data, 'readed')">
                                                <a href="javascript://">
                                                    <i class="fa fa-envelope-o"></i> Read
                                                </a>
                                            </li>
                                            <li data-bind="visible: $root.Message().listType() != 'star', click: $root.Message().changeFilter.bind($data, 'star')">
                                                <a href="javascript://">
                                                    <i class="fa fa-star inbox-started color-orange"></i> Starred mail
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </li>

                            </ul>
                            <div data-bind="with: Message" class="wrapper-list-message">
                                <div class="wrapper-loading" style="padding-top: 30px;" data-bind="visible: IsSearching">
                                    <div class="spinner">
                                        <div class="rect1"></div>
                                        <div class="rect2"></div>
                                        <div class="rect3"></div>
                                        <div class="rect4"></div>
                                        <div class="rect5"></div>
                                    </div>
                                </div>
                                <ul data-bind="foreach: listMessage, visible: !IsSearching()">
                                    <li data-bind="attr: {class: IsRead() ? 'sidebar-item' : 'sidebar-item unread'}">
                                        <div class="wrapper-message-status wrapper-message-status-left">
                                            @*<a href="javascript://">
                                                    <i class="clip-checkbox-unchecked-2" data-bind="visible: !$root.Message().checkedMessageId()"></i>
                                                    <i class="clip-checkbox-checked" data-bind="visible: $root.Message().checkedMessageId"></i>
                                                </a>*@
                                            <div class="checker"><span><input type="checkbox" class="mail-checkbox" data-bind="attr: { value: Id }, checked: $parent.checkedMessageId"></span></div>
                                        </div>
                                        <a href="javascript://" data-bind="click: SendTime ? $root.Detail.bind($data, $data) : $root.ComposeContinue.bind($data, $data)">
                                            <div class="left-content">
                                                <!-- ko if: FullName != undefined -->
                                                <h4 data-bind="text: FullName"></h4>
                                                <!-- /ko -->
                                                <p class="content" data-bind="text: Title"></p>
                                            </div>
                                        </a>
                                        <div class="right-content" data-bind="visible: !$root.IsShowSidebar()">
                                            <div class="time">
                                                <span data-bind="text: SendTime"></span>
                                                @*<span>20/11/2014</span>*@
                                            </div>
                                            <ul class="options">
                                                <li><i class="fa fa-trash-o" title="Delete" data-bind="click: $root.DeleteMessage.bind($data, false)"></i></li>
                                                @*<li><i class="fa fa-envelope-o" title="Đánh dấu đã đọc" data-bind="click: $root.MarkAsRead"></i></li>*@
                                            </ul>
                                        </div>
                                        <div class="wrapper-message-status wrapper-message-status-right">
                                            <a href="javascript://" class="pull-left pr-mgr-5" data-bind="click: $parent.setStar.bind($data, $data, !Star())">
                                                <i data-bind="attr: {class: Star() ? 'color-orange fa fa-star' : 'fa fa-star-o'}"></i>
                                            </a>
                                            <a href="javascript://" class="pull-left pr-mgr-5" data-bind="visible: AttachmentCount > 0">
                                                <i class="fa fa-paperclip"></i>
                                            </a>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div class="wrapper-pager m0">
                                <div id="sumaryMessagePager" class="col-xs-6 p0 sumaryPager"></div>
                                <div id="messagePager" class="col-xs-6 p0"></div><!-- end message pager -->
                            </div>
                        </div><!-- end content -->
                    </div>
                    <div class="sidebar-content notification-content" data-bind="visible: CurrentMode() == 1, attr:{ 'min-height': $root.messageMinHeight }">
                        <div class="content p0">
                            <form data-bind="submit: $root.MyNotification().searchSubmit" class="search">
                                <div class="form-group">
                                    <div class="input-group">
                                        <input type="text" data-bind="value: $root.MyNotification().Keyword, valueUpdate: 'afterkeydown'" placeholder="Search notification" class="form-control">
                                        <span class="input-group-btn">
                                            <button type="submit" class="btn btn-default">
                                                <i class="fa fa-search" data-bind="visible: !$root.Message().loading()"></i>
                                                <i class="fa fa-spinner fa-pulse" data-bind="visible: $root.Message().loading"></i>
                                            </button>
                                        </span>
                                    </div><!-- /input-group -->
                                </div>
                            </form>
                            <ul class="sidebar-action">
                                <li>
                                    <!-- Split button -->
                                    <div class="btn-group">
                                        <button data-bind="click: $root.ChangeCheckAllNotification" class="btn btn-default btn-sm" type="button">
                                            <i data-bind="visible: $root.MyNotification().checkAllNotification" class="clip-checkbox-checked" style="display: none;"></i>
                                            <i data-bind="visible: !$root.MyNotification().checkAllNotification()" class="clip-checkbox-unchecked"></i>
                                        </button>
                                        <button aria-expanded="false" data-toggle="dropdown" class="btn btn-default btn-sm dropdown-toggle  pr-pdl-10 pr-pdr-10" type="button">
                                            <span class="caret"></span>
                                        </button>
                                        <ul role="menu" class="dropdown-menu">
                                            <li data-bind="click: $root.MyNotification().changeCheckboxFilter.bind($data, 'all')"><a class="pr-icon-left" href="javascript://">All </a></li>
                                            <li data-bind="click: $root.MyNotification().changeCheckboxFilter.bind($data, 'unRead')"><a class="pr-icon-left" href="javascript://"><i class="fa fa-envelope"></i><span>Unread</span></a></li>
                                            <li data-bind="click: $root.MyNotification().changeCheckboxFilter.bind($data, 'readed')"><a class="pr-icon-left" href="javascript://"><i class="fa fa-envelope-o"></i><span>Read</span></a></li>
                                            <li data-bind="click:  $root.MyNotification().changeCheckboxFilter.bind($data, 'info')"><a class="pr-icon-left" href="javascript://"><i class="clip-info color-blue mr10"></i><span>Information</span></a></li>
                                            <li data-bind="click:  $root.MyNotification().changeCheckboxFilter.bind($data, 'warning')"><a class="pr-icon-left" href="javascript://"><i class="clip-warning color-orange mr10"></i><span>Warning</span></a></li>
                                        </ul>
                                    </div>
                                </li>
                                <li class="pull-right" data-bind="visible: $root.MyNotification().checkedNotifyId().length > 0" style="display: none;">
                                    <!-- Single button -->
                                    <div class="btn-group">
                                        <button aria-expanded="false" data-toggle="dropdown" class="btn btn-default btn-sm dropdown-toggle" type="button">
                                            Action<i class="fa fa-angle-down"></i>
                                        </button>
                                        <ul style="right: 0; left: auto;" role="menu" class="dropdown-menu">
                                            <li data-bind="click: $root.MyNotification().markReaded.bind($data, false)">
                                                <a href="javascript://">
                                                    <i class="fa fa-envelope"></i> Mark unread
                                                </a>
                                            </li>
                                            <li data-bind="click: $root.MyNotification().markReaded.bind($data, true)">
                                                <a href="javascript://">
                                                    <i class="fa fa-envelope-o"></i> Mark read
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                                <li class="pull-right mr5">
                                    <div class="btn-group">
                                        <a data-toggle="dropdown" href="javascript://" class="btn btn-sm btn-default dropdown-toggle">
                                            <span data-bind="text: $root.MyNotification().filterTitle">View: Unread</span> <i class="fa fa-angle-down"></i>
                                        </a>
                                        <ul style="right: 0; left: auto;" class="dropdown-menu">
                                            <li data-bind="click: $root.MyNotification().changeFilter.bind($data, 'all')">
                                                <a href="javascript://">
                                                    All
                                                </a>
                                            </li>
                                            <li data-bind="click: $root.MyNotification().changeFilter.bind($data, 'unRead')">
                                                <a href="javascript://">
                                                    <i class="fa fa-envelope"></i> Unread
                                                </a>
                                            </li>
                                            <li data-bind="click: $root.MyNotification().changeFilter.bind($data, 'readed')">
                                                <a href="javascript://">
                                                    <i class="fa fa-envelope-o"></i> Read
                                                </a>
                                            </li>
                                            <li data-bind="click: $root.MyNotification().changeFilter.bind($data, 'info')">
                                                <a href="javascript://">
                                                    <i class="clip-info color-blue mr10"></i> Information
                                                </a>
                                            </li>
                                            <li data-bind="click: $root.MyNotification().changeFilter.bind($data, 'warning')">
                                                <a href="javascript://">
                                                    <i class="clip-warning color-orange mr10"></i> Warning
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                            </ul>
                            <div data-bind="with: MyNotification" class="wrapper-list-message wrapper-list-notification">
                                <div class="wrapper-loading" style="padding-top: 30px;" data-bind="visible: IsSearching">
                                    <div class="spinner">
                                        <div class="rect1"></div>
                                        <div class="rect2"></div>
                                        <div class="rect3"></div>
                                        <div class="rect4"></div>
                                        <div class="rect5"></div>
                                    </div>
                                </div>
                                <ul class="media-list" data-bind="foreach: listNotify, visible: !IsSearching()">
                                    <li class="sidebar-item" data-bind="attr: {class: IsRead() ? 'sidebar-item' : 'sidebar-item unread'}">
                                        <div class="media">
                                            <div class="media-left">
                                                <input type="checkbox" data-bind="attr: { value: Id }, checked: $parent.checkedNotifyId" class="mail-checkbox" value="19">
                                            </div>
                                            <div class="media-body">
                                                <a href="javascript://" data-bind="click: $root.ShowNotificationDetail">
                                                    <div class="media">
                                                        <div class="media-body">
                                                            <p class="content media-heading" data-bind="text: Title"></p>
                                                            <span class="time" data-bind="text: SendTime"></span>
                                                        </div>
                                                        <div class="media-right">
                                                            <i data-bind="attr:{class: Type == 0 ? 'clip-warning color-orange' : 'clip-info color-blue'}"></i>
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div class="wrapper-pager m0">
                                <div id="sumaryNotifyPager" class="col-xs-6 p0 sumaryPager"></div>
                                <div id="notifyPager" class="col-xs-6 p0"></div><!-- end message pager -->
                            </div>
                        </div><!-- end content -->
                    </div><!-- end notification content -->
                </div> <!-- end sidebar -->
                <div id="content" data-bind="attr:{ class: IsMobile() && IsBack() ? 'hidden' : 'col-sm-6 col-md-8 p0 pr15' }">
                    <ul class="actions text-right" data-bind="visible: $root.CurrentMode() == 0">
                        <li data-bind="visible: IsMobile" class="pull-left">
                            <a href="javascript://" class="btn" data-bind="click: Back">
                                <i class="fa fa-arrow-left"></i>
                            </a>
                        </li>
                        <li data-bind="visible: $root.Message().ShowMessageContent()">
                            <a href="javascript://" class="btn pulll-right pr-icon-left" data-bind="click: $root.Message().reply.bind($data, true)" title="Reply all"><i class="fa fa-reply-all"></i> <span data-bind="visible: !IsMobile()"> Reply all</span></a>
                        </li>
                        <li data-bind="visible: $root.Message().ShowMessageContent()">
                            <a href="javascript://" class="btn pulll-right pr-icon-left" data-bind="click: $root.Message().reply.bind($data, false)" title="Reply"><i class="fa fa-reply"></i> <span data-bind="visible: !IsMobile()"> Reply</span></a>
                        </li>
                        <li data-bind="visible: $root.Message().ShowMessageContent()">
                            <a href="javascript://" class="btn pulll-right pr-icon-left" data-bind="click:  $root.Message().forward.bind($data)" title="Next move"><i class="fa fa-mail-forward"></i> <span data-bind="visible: !IsMobile()"> Next move</span></a>
                        </li>
                        <li data-bind="visible: $root.Message().ShowMessageContent()">
                            <a href="javascript://" class="btn pulll-right pr-icon-left" data-bind="click: $root.DeleteMessage.bind($data, true)" title="Delete "><i class="fa fa-trash-o"></i> <span data-bind="visible: !IsMobile()"> Delete</span></a>
                        </li>
                        <li data-bind="visible: $root.Message().isShowCompose()">
                            <span class="btn fileinput-button">
                                <i class="clip-attachment"></i>
                                <i id="loadingUpload1" class="fa fa-spinner fa-pulse" style="display: none"></i>
                                <span data-bind="visible: !IsMobile()"> Attach file </span>
                                <input id="messageFileUpload" type="file" multiple="" name="files[]">
                            </span>
                        </li>
                        <li data-bind="visible:  $root.Message().isShowCompose()">
                            <a href="javascript://" class="btn pulll-right pr-icon-left" title="Lưu nháp" data-bind="click: $root.Message().saveDraft.bind($data, null, true)"><i class="fa fa-save"></i> <span data-bind="visible: !IsMobile()">Save drafts</span></a>
                        </li>
                        <li data-bind="visible:  $root.Message().isShowCompose()">
                            <a href="javascript://" class="btn pulll-right pr-icon-left" title="Cancel" data-bind="click: $root.DiscardMessage"><i class="fa fa-trash-o"></i> <span data-bind="visible: !IsMobile()">Cancel</span></a>
                        </li>
                        <li data-bind="visible:  $root.Message().isShowCompose()">
                            <a href="javascript://" class="btn pulll-right pr-icon-left" title="Gửi" data-bind="click: $root.Message().send.bind($data)"><i class="fa fa-send"></i> <span data-bind="visible: !IsMobile()">Send</span></a>
                        </li>
                    </ul><!-- end options -->
                    <ul class="actions text-right" data-bind="visible: $root.CurrentMode() == 1">
                        <li data-bind="visible: IsMobile" class="pull-left">
                            <a href="javascript://" class="btn" data-bind="click: Back">
                                <i class="fa fa-arrow-left"></i>
                            </a>
                        </li>
                    </ul><!-- end options -->
                    <div class="wrapper-message">
                        <div class="message-detail" data-bind="visible: $root.CurrentMessagePage() !== 'create' && $root.CurrentMode() == 0">
                            <!-- ko if: $root.Message().ShowMessageContent() -->
                            <div class="col-md-12">
                                <div class="form-inline">
                                    <div class="form-group">
                                        <h4 class="message-subject" data-bind="text: $root.Message().subject"></h4>
                                    </div><!-- end form group -->
                                    <hr />
                                    <div class="form-group message-from">
                                        <label>From:</label>
                                        <span><b data-bind="html: $root.Message().fromUser"></b></span>
                                    </div><!-- end form group -->
                                    <hr>
                                    <div id="detailUserSend" style="display: none;">
                                        <div class="form-group message-to">
                                            <label>To: </label>
                                            <span data-bind="html: $root.Message().toUser"></span>
                                        </div><!-- end form group -->
                                        <hr />

                                        <!-- ko if: $root.Message().ccToUser() != '' -->
                                        <div class="form-group message-cc">
                                            <label>Cc: </label>
                                            <span data-bind="html: $root.Message().ccToUser"></span>
                                        </div><!-- end form group -->
                                        <hr />
                                        <!-- /ko -->
                                    </div>
                                    <div class="form-group message-time">
                                        <label>Sent at: </label>
                                        <span data-bind="html: $root.Message().sendTime() + ' ('+ moment($root.Message().sendTime(), resources.common.defaultFormat.dateTime).fromNow() +')'"></span>
                                    </div><!-- end form group -->
                                    <hr />
                                    <div class="row">
                                        <div class="message-content col-sm-12" data-bind="html: $root.Message().content"></div>
                                    </div>
                                    <hr />
                                    <div class="row" data-bind="visible: $root.Message().attachmentCount() > 0">
                                        <div class="pr-mgt-10 col-sm-12" data-bind="text: $root.Message().attachmentCount() + ' Đính kèm tệp...'"></div>
                                        <div class="wrapper-attach-file" data-bind="foreach: $root.Message().attachments">
                                            <div class="col-md-3 col-sm-4 col-lg-2">
                                                <div class="attachment-item">
                                                    <a data-bind="attr:{title: 'Download ' + AttachmentName, href: '/message/downloadattachment?id=' + Id + '&messageId=' + $root.Message().id() }">
                                                        <div data-bind="attr: {class: 'icon fa ' + Extension.replace('.', '')}"></div>
                                                        <div class="text" data-bind="text: AttachmentName"></div>
                                                    </a>
                                                    <a class="download" data-bind="attr: { href: '/message/downloadattachment?id=' + Id + '&messageId=' + $root.Message().id() }" title="Download">
                                                        <i class="fa fa-download"></i>
                                                    </a>
                                                </div><!-- end attachment item-->
                                            </div>
                                        </div>
                                    </div>
                                </div><!-- end wrapper-message -->
                            </div><!-- end content -->
                            <!-- /ko -->
                        </div><!-- end message detail -->
                        <div class="message-compose" data-bind="visible: $root.Message().isShowCompose() && $root.CurrentMode() == 0">
                            <div class="col-md-12">
                                <div class="form-horizontal">
                                    <div class="form-group group-to">
                                        <label class="w70 control-label pull-left"><span class="editable" data-bind="click: $root.Message().showChooseUserModal.bind($data, 'to')" title="Choose recipient">To:</span> </label>
                                        <div class="">
                                            <input type="text" class="form-control" id="to" data-bind="value: $root.Message().to, hasFocus: $root.Message().toFocus" />
                                            <span class="inbox-cc-bcc">
                                                <span class="inbox-cc" data-bind="visible: !$root.Message().isShowCc(), click: $root.ChangeShowCc" style=""> Cc </span>
                                                <span class="inbox-bcc" data-bind="visible: !$root.Message().isShowBcc(), click: $root.ChangeShowBcc" style=""> Bcc </span>
                                            </span>
                                        </div>
                                    </div><!-- end form group -->
                                    <hr />
                                    <div class="form-group  group-cc" data-bind="visible: $root.Message().isShowCc()" style="position: relative">
                                        <button style="width: 0px; height: 0px; opacity: 0; top: 13px; -moz-opacity: 0; right: 30px; position: absolute; cursor: text;" onfocus="$(this).parent().find('ul:first').click()"></button>
                                        <a class="close" data-bind="click: $root.ChangeShowCc" href="javascript:;">
                                            <i class="fa fa-times"></i>
                                        </a>
                                        <label class="w70 control-label pull-left"><span class="editable" data-bind="click: $root.Message().showChooseUserModal.bind($data, 'cc')">Cc:</span> </label>
                                        <div class="">
                                            <input type="text" id="cc" class="form-control" data-bind="value: $root.Message().cc, hasFocus: $root.Message().ccFocus" />
                                        </div>
                                    </div>
                                    <hr data-bind="visible: $root.Message().isShowCc()" />
                                    <div class="form-group group-bcc" data-bind="visible: $root.Message().isShowBcc()" style="position: relative">
                                        <button style="width: 0px; height: 0px; opacity: 0; top: 13px; -moz-opacity: 0; right: 30px; position: absolute; cursor: text;" onfocus="$(this).parent().find('ul:first').click()"></button>
                                        <a class="close" data-bind="click: $root.ChangeShowBcc" href="javascript:;">
                                            <i class="fa fa-times"></i>
                                        </a>
                                        <label class="w70 control-label pull-left"><span class="editable" data-bind="click: $root.Message().showChooseUserModal.bind($data, 'bcc')">Bcc:</span> </label>
                                        <div class="">
                                            <input type="text" id="bcc" class="form-control" data-bind="value: $root.Message().bcc, hasFocus: $root.Message().bccFocus" />
                                        </div>
                                    </div><!-- end form group -->
                                    <hr data-bind="visible: $root.Message().isShowBcc()" />
                                    <div class="form-group group-subject">
                                        <label class="w70 control-label pull-left">Title:</label>
                                        <div class="message-subject">
                                            @*<button style="width: 0px;height: 0px;opacity: 0;top: 1px;-moz-opacity: 0;left: 1px;position: absolute;cursor:text;"></button>*@
                                            <input type="text" name="subject" data-bind="value: $root.Message().subject, hasFocus: $root.Message().subjectFocus" class="form-control no-border padding-left-12" placeholder="Enter mail title..." />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="message-content col-md-12">
                                            <textarea class="form-control" id="messageContent"></textarea>
                                        </div>
                                        <div class="clear"></div>
                                    </div>
                                </div><!-- end wrapper-message -->
                            </div>
                            <div class="col-md-12" data-bind="visible: $root.Message().attachmentCount() > 0">
                                <div class="pr-mgt-10" data-bind="text: $root.Message().attachmentCount() + ' Attach file...'"></div>
                                <div class="row wrapper-attach-file" data-bind="foreach: $root.Message().attachments" style="margin: 55px;">
                                    <div class="col-md-3 col-sm-4 col-lg-2">
                                        <div class="attachment-item" data-bind="attr:{title: AttachmentName}">
                                            <div data-bind="attr: {class: 'icon fa ' + Extension.replace('.', '')}"></div>
                                            <div class="text" data-bind="text: AttachmentName"></div>
                                            <a href="javascript://" class="remove" data-bind="click: $root.Message().removeAttachment.bind($data, $data)" title="Delete attached file">
                                                <i class="fa fa-times"></i>
                                            </a>
                                        </div><!-- end attachment item-->
                                    </div>
                                </div>
                            </div><!-- end message compose-->
                        </div><!-- end wrapper message -->
                        <div class="wrapper-notification" data-bind="visible: CurrentMode() == 1">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-xs-2">Title</label>
                                    <div class="col-xs-10" data-bind="text: $root.CurrentNotification().Title"></div>
                                </div>
                                <hr />
                                <div class="form-group">
                                    <label class="col-xs-2">Content</label>
                                    <div class="col-xs-10" data-bind="html: $root.CurrentNotification().Content"></div>
                                </div>
                                <hr />
                                <div class="form-group">
                                    <label class="col-xs-2">Sent date</label>
                                    <div class="col-xs-10" data-bind="text: $root.CurrentNotification().SendTime"></div>
                                </div>
                            </div>
                        </div><!-- end wrapper-notification -->
                    </div>
                    <div>
                        <ul class="actions message-option-bottom" data-bind="visible: $root.CurrentMode() == 0 && ($root.Message().isShowCompose() || $root.Message().ShowMessageContent())" style="display: none;">
                            <li data-bind="visible: $root.Message().ShowMessageContent()">
                                <a href="javascript://" class="btn pulll-right pr-icon-left btn-sm btn-primary" data-bind="click: $root.Message().reply.bind($data, true)" title="Reply all"><i class="fa fa-reply-all"></i> <span data-bind="visible: !IsMobile()">Reply all</span></a>
                            </li>
                            <li data-bind="visible: $root.Message().ShowMessageContent()">
                                <a href="javascript://" class="btn pulll-right pr-icon-left btn-sm btn-primary" data-bind="click: $root.Message().reply.bind($data, false)" title="Reply"><i class="fa fa-reply"></i> <span data-bind="visible: !IsMobile()">Reply</span></a>
                            </li>
                            <li data-bind="visible: $root.Message().ShowMessageContent()">
                                <a href="javascript://" class="btn pulll-right pr-icon-left btn-sm btn-primary" data-bind="click: $root.Message().forward.bind($data)" title="Next move"><i class="fa fa-mail-forward"></i> <span data-bind="visible: !IsMobile()">Next move</span></a>
                            </li>
                            <li data-bind="visible: $root.Message().ShowMessageContent()">
                                <a href="javascript://" class="btn pulll-right pr-icon-left btn-sm btn-primary" data-bind="click: $root.DeleteMessage.bind($data, true)" title="Delete "><i class="fa fa-trash-o"></i> <span data-bind="visible: !IsMobile()">Delete </span></a>
                            </li>
                            <li data-bind="visible: $root.Message().isShowCompose()">
                                <span class="btn btn-primary fileinput-button btn-sm">
                                    <i class="clip-attachment"></i>
                                    <i id="loadingUpload1" class="fa fa-spinner fa-pulse" style="display: none"></i>
                                    <span data-bind="visible: !IsMobile()"> Attached File... </span>
                                    <input id="messageFileUpload1" type="file" multiple="" name="files[]">
                                </span>
                            </li>
                            <li data-bind="visible:  $root.Message().isShowCompose()">
                                <a href="javascript" class="btn pulll-right btn-primary pr-icon-left btn-sm" title="Save draft" data-bind="click: $root.Message().saveDraft.bind($data, null, true)"><i class="fa fa-save"></i> <span data-bind="visible: !IsMobile()">Save draft</span></a>
                            </li>
                            <li data-bind="visible:  $root.Message().isShowCompose()">
                                <a href="javascript://" class="btn pulll-right btn-primary pr-icon-left btn-sm" title="Cancel" data-bind="click: $root.DiscardMessage"><i class="fa fa-trash-o"></i> <span data-bind="visible: !IsMobile()">Cancel</span></a>
                            </li>
                            <li data-bind="visible:  $root.Message().isShowCompose()">
                                <a href="javascript://" class="btn pulll-right btn-primary pr-icon-left btn-sm" title="Send" data-bind="click: $root.Message().send.bind($data)"><i class="fa fa-send"></i> <span data-bind="visible: !IsMobile()">Send</span></a>
                            </li>
                        </ul><!-- end options -->
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
                <i class="fa fa-times"></i>
               Close </button>
        </div>
    </div>

    <!-- #region Model pick user -->
    <div class="modal fade modal-dialog modal-full" id="chooseUserModal" tabindex="-1" role="dialog" aria-labelledby="chartModelLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="chartModelLabel"><i class="fa fa-comments color-blue"></i> Select the sender</h4>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-horizontal row">
                        @*<label class="col-sm-2 control-label">
                                @Resources.Message_Index_Modal_SelectUsers_Office_Display
                            </label>*@
                        <div class="col-sm-4">
                            @*<select id="Office" class="form-control" data-bind="value: officeId"><option value="">@Resources.Message_Index_Modal_SelectUsers_Office_Dropdown_Choose</option></select>*@
                            <div id="officesDropdown"></div>
                        </div>
                    </div>
                    <br />
                    <div style="overflow: auto; height: 200px">
                        <table id="tableChooseUser" class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr role="row">
                                    <td class="center bold"><input type="checkbox" data-bind="checked: $root.Message().checkAllUserName"></td>
                                    <th class="center bold">Full name</th>
                                    <th class="center bold">Account management </th>
                                    @*<th class="center bold">@Resources.Message_Index_Modal_SelectUsers_List_Column_StaffCode</th>*@
                                    <th class="center bold">Unit</th>
                                    <th class="center bold">Position</th>
                                </tr>
                            </thead>
                            <tbody aria-relevant="all" aria-live="polite" role="alert" data-bind="foreach: $root.Message().listChooseUser()">
                                <tr>
                                    <td class="center"><input type="checkbox" class="mail-checkbox" data-bind="attr: { value: UserName }, checked: $root.Message().checkedUserName"></td>
                                    <td data-bind="text:FullName"></td>
                                    <td data-bind="text:UserName"></td>
                                    @*<td data-bind="text:Code"></td>*@
                                    <td data-bind="text:OfficeName"></td>
                                    <td data-bind="text:TitleName"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <br />
                    <div class="form-horizontal row">
                        <div class="col-sm-12">
                            <textarea id="chooseUser" style="display: none;"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal" data-bind="click: $root.Message().chooseUser.bind($data)">Select</button>
            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close </button>
        </div>
    </div>
    <!-- #endregion -->
    @*</div>
        </div>*@
</div><!-- end wrapper notification center -->
@*<link rel="stylesheet" href="~/Content/NotificationCenter.css" />*@