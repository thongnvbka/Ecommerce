@{
    var statusFinish = (byte)OrderStatus.Finish;
    var statusOrder = (byte)OrderStatus.Order;
    var orderdetailCancel = (byte)OrderDetailStatus.Cancel;
    var orderdetailSuccess = (byte)OrderDetailStatus.Order;
    var chinaInStock = (byte) OrderPackageStatus.ChinaInStock;

    var orderPackage = (byte)OrderPackageStatus.ShopDelivery;

    var orderWait = (byte)OrderStatus.AreQuotes;
    var statusSuccess = (byte)OrderStatus.OrderSuccess;
    var statusWaitAccountant = (byte)OrderStatus.WaitAccountant;
    var reasonOther = (byte)OrderReasons.TheOtherReason;
    var deliveryShop = (byte)OrderStatus.DeliveryShop;
    var inWarehouse = (byte)OrderStatus.InWarehouse;
    var orderCancel = (byte)OrderStatus.Cancel;

    var delete = CheckPermision(EnumAction.Delete, EnumPage.OrderDepositNew, EnumPage.OrderOrder, EnumPage.OrderDelay, EnumPage.OrderNew);
}

<script>
    var reasonOther = @reasonOther;
</script>

<form id="orderViewAddOrEditId">
    @Html.AntiForgeryToken()
    <div id="orderAddOrEditModal" class="modal fade modal-dialog modal-p90" tabindex="-1" data-backdrop="static" role="dialog">
        <div class="modal-body">
            <div class="row">
                <div class="col-xs-9">
                    <h2 class="order-header">
                        <i class="fa fa-globe"></i> Order code: <strong data-bind="text: ReturnCode( order().Code())" style="color: red"></strong>
                        <!-- ko if: order().IsRetail -->
                        <i>[Order]</i>
                        <!-- /ko -->
                        <span data-bind="text: order().StatusName(), css: order().StatusClass()"></span>
                        <!-- ko if: mess() !== "" -->
                        <span class="text-yellow"><i class="fa fa-exclamation-triangle"></i> <span data-bind="text: mess"></span> <a data-bind="click: showOrderShop" href="javascript:;">See list</a></span>
                        <!-- /ko -->
                    </h2>
                </div>
                <div class="col-xs-3">
                    <button type="button" class="btn btn-default pull-right ml15" data-dismiss="modal"><b>x</b></button>
                    <h2 class="order-header pull-right">
                        <small data-bind="text: 'Start Date :' + moment(order().Created()).format('DD/MM/YYYY')" class="pull-right"></small><br />
                        <!-- ko if: order().Status() !== @statusFinish-->
                        <small class="pull-right">Date of completion: --/--/----</small>
                        <!-- /ko -->
                        <!-- ko if: order().Status() == @statusFinish-->
                        <small data-bind="text: 'Date of completion: ' + moment(order().LastUpdate()).format('DD/MM/YYYY')" class="pull-right"></small>
                        <!-- /ko -->
                    </h2>
                </div>
            </div>
            <div class="row importwarehouse">
                <div class="col-md-4">
                    <strong class="strong-title"> Customer Information </strong>
                    <div>
                        <!-- ko if: customer() != null -->
                        <table class="table">
                            <tr>
                                <th class="w-40"><i class="fa fa-user"></i></th>
                                <td>
                                    <span data-bind="text: order().LevelName()" class="label label-danger"></span>
                                    <span data-bind="text: order().CustomerName()"></span>
                                </td>
                            </tr>
                            <tr>
                                <th><i class="fa fa-envelope-o"></i></th>
                                <td data-bind="text: order().CustomerEmail()"></td>
                            </tr>
                            <tr>
                                <th><i class="fa fa-phone"></i></th>
                                <td data-bind="text: order().CustomerPhone()"></td>
                            </tr>
                            <tr>
                                <th><i class="fa fa-map-marker"></i></th>
                                <!-- ko if: customerFormAddress() != null -->
                                <td data-bind="text: customerFormAddress().Address +', '+ customerFormAddress().WardName +', '+ customerFormAddress().DistrictName +', '+ customerFormAddress().ProvinceName"></td>
                                <!-- /ko -->
                            </tr>
                        </table>
                        <!-- /ko -->
                    </div>
                </div>
                @*<div class="col-md-4">
                        <strong class="strong-title">Thông tin người nhận</strong>
                        <div>
                            <!-- ko if: customerToAddress() != null -->
                            <table class="table">
                                <tr>
                                    <th class="w-40"><i class="fa fa-user"></i></th>
                                    <td data-bind="text: customerToAddress().FullName"></td>
                                </tr>
                                <tr>
                                    <th><i class="fa fa-phone"></i></th>
                                    <td data-bind="text: customerToAddress().Phone"></td>
                                </tr>
                                <tr>
                                    <th><i class="fa fa-map-marker"></i></th>
                                    <!-- ko if: customerFormAddress() != null -->
                                    <td data-bind="text: customerToAddress().Address +', '+ customerToAddress().WardName +', '+ customerToAddress().DistrictName +', '+ customerToAddress().ProvinceName"></td>
                                    <!-- /ko -->
                                    <!-- ko ifnot: customerFormAddress() != null -->
                                    <td></td>
                                    <!-- /ko -->
                                </tr>
                            </table>
                            <!-- /ko -->
                        </div>
                    </div>*@
                <div class="col-md-4">
                    <strong class="strong-title">More information</strong>
                    <div>
                        <table class="table">
                            <tr>
                                <th>Website</th>
                                <td>
                                    <a href="javascript:;">
                                        <strong data-bind="text: order().WebsiteName()"></strong>
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <th>Shop</th>
                                <td>
                                    <a href="javascript:;" data-bind="click: showOrderHistoryShop">
                                        <strong data-bind="text: order().ShopName()"></strong>
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <th>Exchange rate is applied</th>
                                <td data-bind="text: '1 CNY = ' + order().ExchangeRate() + ' Baht'"></td>
                            </tr>
                            <!-- ko if: customer() != null -->
                            <tr>
                                <th>Customer warehouse </th>
                                <td>
                                    <select class="form-control select-view mb10" style="width: 100%;" data-bind="options: listWarehouseVN, optionsText: 'Name', optionsValue: 'Id', value: warehouseVNId, optionsCaption: '-- Chọn kho --', enable: order().Status() < @statusFinish"></select>
                                </td>
                            </tr>
                            <tr>
                                <th>Identifier code</th>
                                <td data-bind="text: codeOw"></td>
                            </tr>
                            <!-- /ko -->
                        </table>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="box-order">
                        <div class="box-header with-border">
                            <i class="fa fa-bullhorn"></i>
                            <h3 class="box-title">Guest notes</h3>
                        </div>
                        <div class="box-body">
                            <div>
                                <!-- ko if: order().Note() == null -->
                                ---
                                <!-- /ko -->
                                <!-- ko ifnot: order().Note() == null -->
                                <p data-bind="text: order().Note()"></p>
                                <!-- /ko -->
                            </div>
                        </div>
                    </div>

                    <div class="box-order">
                        <div class="box-header with-border">
                            <i class="fa fa-bullhorn"></i>
                            <h3 class="box-title">Staff Notes</h3>
                        </div>
                        <div class="box-body">
                            <div>
                                <textarea data-bind="value: order().UserNote, valueUpdate: 'blur', event: { blur: updateOrderUserNote}, enable: order().Status() < @statusFinish" autocomplete="off" class="form-control no-border-fix auto-size" rows="4"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row importwarehouse">
                <div class="col-sm-12 invoice-col">
                    <div class="form-group">
                        <b class="strong-title">Service is in use: </b>
                        <div data-bind="foreach:  order().ListOrderService()">
                            <label style="margin-right:10px;">
                                <!-- ko if: Checked == 0 -->
                                <a data-bind="click: (Mode == 1 || $parent.order().Status() > @inWarehouse) ? '' : $parent.updateService" href="javascript:;"><i style="font-size: 19px; margin: 4px; color:red" class="fa fa-square-o"></i><span data-bind="text: ServiceName"></span></a>
                                <br />
                                <span class="pull-right">0 Baht</span>
                                <!-- /ko -->
                                <!-- ko ifnot: Checked == 0 -->
                                <a data-bind="click: (Mode == 1 || $parent.order().Status() > @inWarehouse) ? '' : $parent.updateService" href="javascript:;"><i style="font-size: 19px; margin: 4px; color:forestgreen" class="fa fa-check-square-o"></i><span data-bind="text: ServiceName"></span></a>
                                <br />
                                <span data-bind="text: formatNumbericCN(TotalPrice, 'N2') + ' Baht'" class="pull-right"></span>
                                <!-- /ko -->
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row importwarehouse">
                <div class="col-xs-12 table-responsive">
                    <div data-bind="css: isDetailRending() == true? 'display-none' : ''">
                        <div class="spinner">
                            <div class="rect1"></div>
                            <div class="rect2"></div>
                            <div class="rect3"></div>
                            <div class="rect4"></div>
                            <div class="rect5"></div>
                        </div>
                    </div>
                    <div data-bind="css: isDetailRending() == true? '' : 'display-none'" class="display-none">
                        <b class="strong-title">Detail order:</b>
                        <span data-bind="if:  order().ListDetail().length != 0">
                            <span colspan="12">
                                Total link: <b data-bind="text: order().ListDetail().length"></b> - Total customer order: <b data-bind="text: formatNumbericCN(_.sumBy(order().ListDetail(), function(o) { return  Globalize.parseFloat(o.Quantity()); }),'N0')"></b>
                                - Total product set: <b data-bind="text: formatNumbericCN(_.sumBy(order().ListDetail(), function(o) { return  o.Status != 1 ? Globalize.parseFloat(o.QuantityBooked()) : 0; }),'N0')"></b>
                            </span>

                        </span>
                        @*<span class="pull-right">Số link đặt được: <b data-bind="text: successDetail()"></b>/<span data-bind="text: order().ListDetail().length"></span></span>*@
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th class="text-center"></th>
                                    <th class="text-center">#</th>
                                    <th class="text-center"><i class="fa fa-image"></i>Image</th>
                                    <th class="text-center"><i class="fa fa-cube"></i> Product name</th>
                                    <th class="text-center"><i class="fa fa-exclamation-circle"></i>Property</th>
                                    <th class="text-center" style="color: blue"><i class="fa fa-cubes"></i> Order customer</th>
                                    <th class="text-center" style="color: blue"><i class="fa fa-cubes"></i> Achieve</th>
                                    <th class="text-center" style="color: blue"><i class="fa fa-cubes"></i> Actually received</th>
                                    <th class="text-center" style="color: red"><i class="fa fa-money"></i> Product price (CNY)</th>
                                    <th class="text-center" style="color: red"><i class="fa fa-superscript"></i> Total (CNY)</th>
                                    <th class="text-center"><i class="fa fa-file"></i> Note</th>
                                    <th class="text-center"><i class="fa fa-thumb-tack"></i> Status</th>
                                    @if (UserState.Type == 0 || UserState.Type == 4)
                                    {
                                        <!-- ko if: order().Status() < @statusWaitAccountant -->
                                        <th class="text-center"><i class="fa fa-hand-pointer-o"></i> Action </th>

                                        <!-- /ko -->
                                    }
                                    else
                                    {
                                        <!-- ko if: order().Status() <= @inWarehouse -->
                                        <th class="text-center"><i class="fa fa-hand-pointer-o"></i> Action </th>
                                        <!-- /ko -->
                                    }
                                </tr>
                            </thead>
                            <tbody data-bind="foreach: order().ListDetail()">
                                <tr>
                                    <td class="text-center">
                                        <label>
                                            <input data-bind="checked: isCheck" type="checkbox" class="class-input-check" />
                                        </label>
                                    </td>
                                    <td data-bind="text: $index()+1" class="text-center"></td>
                                    <td class="text-center">
                                        <img data-bind="attr: { src: Image}" style="width: 40px; height: 40px;" alt="" />
                                    </td>
                                    <td>
                                        <a data-bind="text: Name + ' => View', attr: { href: Link}" href="javascript:;" target="_blank"></a><br />
                                        <!-- ko if: Note !== null -->
                                        <span data-bind="text: '( ' + Note + ' )'"></span>
                                        <!-- /ko -->
                                    </td>
                                    <!-- ko if: (Properties != '' && Properties != '[]' ) -->
                                    <td data-bind="foreach: JSON.parse(Properties)">
                                        <span data-bind="text: Label"></span>: <span data-bind="text: Text"></span><br />
                                    </td>
                                    <!-- /ko -->
                                    <!-- ko ifnot: (Properties != '' && Properties != '[]' ) -->
                                    <td>
                                        Color: <span data-bind="text: Color"></span><br />
                                        Size: <span data-bind="text: Size"></span>
                                    </td>
                                    <!-- /ko -->
                                    @*<td data-bind="text: Note"></td>*@
                                    <td class="text-center">
                                        <span data-bind="text: Quantity"></span>
                                    </td>
                                    <td class="text-center">

                                        <!-- ko if: Status != @orderdetailCancel -->
                                        @if (UserState.Type == 1 || UserState.Type == 2)
                                        {
                                            <!-- ko if: $parent.order().Status() <= @inWarehouse -->
                                        <input data-bind="hasFocus: isSelectedQuantityBooked, value: QuantityBooked, css: cssQuantityBooked" class="text-right form-control decimalCN" type="text" />

                                            <!-- /ko -->
                                            <!-- ko ifnot: $parent.order().Status() <= @inWarehouse -->
                                        <span data-bind="text: QuantityBooked"></span>

                                            <!-- /ko -->
                                        }
                                        else
                                        {
                                            <!-- ko if: $parent.order().Status() < @statusSuccess -->
                                        <input data-bind="hasFocus: isSelectedQuantityBooked, value: QuantityBooked, css: cssQuantityBooked" class="text-right form-control decimalCN" type="text" />

                                            <!-- /ko -->
                                            <!-- ko ifnot: $parent.order().Status() < @statusSuccess -->
                                        <span data-bind="text: QuantityBooked"></span>
                                            <!-- /ko -->
}
<!-- /ko -->
<!-- ko ifnot: Status != @orderdetailCancel -->
<span>0</span>
<!-- /ko -->
</td>
<td class="text-center">
    <span data-bind="text: QuantityActuallyReceived"></span>
</td>
<td class="text-center">
    <!-- ko if: Status != @orderdetailCancel -->
    @if (UserState.Type == 1 || UserState.Type == 2)
    {
                                            <!-- ko if: $parent.order().Status() <= @inWarehouse -->
        <input data-bind="hasFocus: isSelectedPrice, value: Price, css: cssPrice" class="text-right form-control decimalCN" type="text" />

                                            <!-- /ko -->
                                            <!-- ko ifnot: $parent.order().Status() <= @inWarehouse -->
        <span data-bind="text: Price"></span>

                                            <!-- /ko -->
                                        }
                                        else
                                        {
                                            <!-- ko if: $parent.order().Status() < @statusSuccess -->
        <input data-bind="hasFocus: isSelectedPrice, value: Price, css: cssPrice" class="text-right form-control decimalCN" type="text" />

                                            <!-- /ko -->
                                            <!-- ko ifnot: $parent.order().Status() < @statusSuccess -->
        <span data-bind="text: Price"></span>
                                            <!-- /ko -->
    }
    <!-- /ko -->
                     <!-- ko ifnot: Status != @orderdetailCancel -->
    <span>0</span>
    <!-- /ko -->
</td>
<td data-bind="text: TotalPrice" class="text-right"></td>
<td class="text-center">
    <textarea data-bind="value: UserNote, enable:  $parent.order().Status() < @statusSuccess" class="auto-size" rows="2"></textarea>
</td>
<td class="text-center">
    <span data-bind="text: statusApp.orderDetail[Status].Name, css: statusApp.orderDetail[Status].Class"></span>
</td>

                                    @if (UserState.Type == 1 || UserState.Type == 2)
                                    {
                                        <!-- ko if: $parent.order().Status() <= @inWarehouse -->
<td class="text-center">
    <!-- ko if: Status != @orderdetailSuccess -->
    <a data-bind="click: $parent.orderDetailSuccess" href="javascript:;" class="btn btn-success btn-xs" title="Achieve"><i class="fa fa-check"></i></a>

                                            <!-- /ko -->
                                            <!-- ko if: Status != @orderdetailCancel -->
    <a data-bind="click: $parent.orderDetailCancel" href="javascript:;" class="btn btn-danger btn-xs" title="Not achieved"><i class="fa fa-times"></i></a>
    <!-- /ko -->
</td>

                                        <!-- /ko -->
                                    }
                                    else
                                    {
                                        <!-- ko if: $parent.order().Status() < @statusWaitAccountant -->
<td class="text-center">
    <!-- ko if: Status != @orderdetailSuccess -->
    <a data-bind="click: $parent.orderDetailSuccess" href="javascript:;" class="btn btn-success btn-xs" title="Achieved"><i class="fa fa-check"></i></a>

                                            <!-- /ko -->
                                            <!-- ko if: Status != @orderdetailCancel -->
    <a data-bind="click: $parent.orderDetailCancel" href="javascript:;" class="btn btn-danger btn-xs" title="Not achieved"><i class="fa fa-times"></i></a>
    <!-- /ko -->
</td>
                                        <!-- /ko -->
}
</tr>
</tbody>
<tfoot data-bind="if: order().ListDetail().length > 0">
    <tr>
        <td colspan="4">
            Total amount selected: <b data-bind="text: totalPriceIsCheck"></b> CNY
        </td>
        <td colspan="5"></td>
        <td colspan="3">
            total price: <b data-bind="text: order().TotalPrice"></b> CNY
        </td>
    </tr>

</tfoot>
<tfoot data-bind="if: order().ListDetail().length == 0">
    <tr>
        <td colspan="12">Orders không có Detail Orders</td>
    </tr>
</tfoot>
</table>
</div>
</div>
</div>
<div class="row">
    <div class="col-xs-12">
        <span><strong class="strong-title">Order processing staff:</strong></span>
        <!-- ko if: userOrder() !== null -->
        <b><span class="text-red" data-bind="text: userOrder().FullName + '-' + userOrder().TitleName"></span></b> <i>(<span data-bind="text: userOrder().Email"></span>)</i>
        <!-- /ko-->
        <!-- ko ifnot: userOrder() !== null -->
        --
        <!-- /ko-->
    </div>
</div>
<div class="row importwarehouse">
    <div class="col-md-8">
        <div class="form-horizontal">
            <div class="box-body">
                <div class="form-group">
                    <div class="col-md-6">
                        <!-- ko if: order().Status() >= @statusOrder -->
                        <table class="table-view">
                            <tbody>
                                <tr>
                                    <td>
                                        <b>China warehouse</b>
                                        <select class="form-control select-view mb10" style="width: 100%;" data-bind="options: listWarehouseOrder, optionsText: 'Name', optionsValue: 'Id', value: warehouseIdOrder, enable: order().Status() < @statusFinish"></select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>

                                                    <!-- ko if: order().Status() <= @inWarehouse -->
                                                    <!-- ko if: (@UserState.Type == 1 || @UserState.Type == 2) -->
                                        <button data-bind="click: showContractCode, enable: isSubmit" class="btn btn-info mb10">
                                            <i class="fa fa-plus"></i> Add code to the contract
                                        </button>

                                                    <!-- /ko -->
                                                    <!-- ko if: (order().Status() <= @statusWaitAccountant && @UserState.Type == 0) -->
                                        <button data-bind="click: showContractCode, enable: isSubmit" class="btn btn-info mb10">
                                            <i class="fa fa-plus"></i> Add code to the contract
                                        </button>
                                        <!-- /ko -->
                                        <!-- /ko -->
                                        <!-- ko if: listContractCode().length > 0 -->
                                        <br />
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th class="text-center w-40">#</th>
                                                    <th class="text-center"><i class="fa fa-barcode"></i> Contract code</th>
                                                    <th class="text-center">
                                                        <i class="fa fa-money"></i> Money (CNY)<br />
                                                        <i>Money order + Money Ship</i>
                                                    </th>
                                                    <th class="text-center"><i class="fa fa-thumb-tack"></i> Status</th>
                                                    <th class="text-center w-40"><i class="fa fa-hand-pointer-o"></i> Action </th>
                                                </tr>
                                            </thead>
                                            <tbody data-bind="foreach: listContractCode">
                                                <tr>
                                                    <td data-bind="text: $index()+1" class="text-center"></td>
                                                    <td class="text-center">
                                                        <!-- ko if: Status <= 1 -->
                                                        <!-- ko if: $parent.order().Status() <= @inWarehouse -->
                                                        <input data-bind="value: ContractCode, hasFocus: isSelectedContractCode, css: cssContractCode, valueUpdate: 'blur'" class="form-control" />

                                                                    <!-- /ko -->
                                                                    <!-- ko ifnot:  $parent.order().Status() <= @inWarehouse -->
                                                        <span data-bind="text: ContractCode"></span>
                                                        <!-- /ko -->
                                                        <!-- /ko -->
                                                        <!-- ko ifnot: Status <= 1 -->
                                                        <span data-bind="text: ContractCode"></span>
                                                        <!-- /ko -->
                                                    </td>
                                                    <td class="text-center">
                                                        <!-- ko if: Status <= 1 -->
                                                        <!-- ko if: $parent.order().Status() <= @inWarehouse -->
                                                        <input data-bind="value: TotalPrice, disable: isDisableTotalPrice, hasFocus: isSelectedTotalPrice, css: cssTotalPrice" class="text-right form-control decimalCN" />

                                                                    <!-- /ko -->
                                                                    <!-- ko ifnot:  $parent.order().Status() <= @inWarehouse -->
                                                        <span data-bind="text: TotalPrice"></span>
                                                        <!-- /ko -->
                                                        <!-- /ko -->
                                                        <!-- ko ifnot: Status <= 1 -->
                                                        <span data-bind="text: TotalPrice"></span>
                                                        <!-- /ko -->
                                                    </td>
                                                    <td class="text-center">
                                                        <span data-bind="text: statusApp.statusContractCode[Status].Name, css: statusApp.statusContractCode[Status].Class"></span>
                                                    </td>
                                                    <td class="text-center w-40">
                                                        <!-- ko if: Status == 1 -->
                                                        <a data-bind="click: $parent.reviewContractCode" href="javascript:;" class="btn btn-success btn-xs"><i class="fa fa-check"></i>Send </a>
                                                        <!-- /ko -->
                                                        <!-- ko if: Status == 0 -->
                                                                      <!-- ko if: ($parent.order().Status() >= @statusWaitAccountant && (@UserState.Type == 1 || @UserState.Type == 2)) -->
                                                        <a data-bind="click: $parent.sendContractCode" href="javascript:;" class="btn btn-success btn-xs"><i class="fa fa-send"></i> Send KT</a>

                                                                    <!-- /ko -->
                                                                    <!-- ko if: $parent.order().Status() <= @inWarehouse -->
                                                        <a data-bind="click: $parent.deleteContractCode" href="javascript:;" class="btn btn-danger btn-xs"><i class="fa fa-trash"></i> Delete </a>
                                                        <!-- /ko -->
                                                        <!-- /ko -->
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <!-- /ko -->
                                    </td>
                                </tr>

                                <tr>
                                    <td>
                                        <b>bargain types</b><br />
                                        <!-- ko foreach: listBargainType -->
                                        <label>
                                            <input data-bind="attr: {value: Value}, checked: $root.bargainType, click: $root.CheckbargainType, enable: $parent.order().Status() < @statusSuccess" type="radio" name="BargainType" /><span data-bind="text: Text" style="font-weight: 400;"></span>
                                        </label><br />
                                        <!-- /ko -->
                                    </td>
                                </tr>

                                <!-- ko if: orderReason() != null -->
                                <tr>
                                    <td>
                                        <b>Reason for slow processing</b>
                                        <select class="form-control select-view mb10" style="width: 100%;" data-bind="options: listReason, optionsText: 'Text', optionsValue: 'Value', value: orderReasonId, optionsCaption: '-- Select a reason for processing delays --'"></select>
                                        <!-- ko if: orderReasonId() == @reasonOther -->
                                        <!-- ko if: order().Status() < @statusWaitAccountant -->
                                        <textarea data-bind="value: orderReasonText" type="text" class="form-control" placeholder="Enter the reason for the processing lag"></textarea>
                                                            <!-- /ko -->
                                        <!-- ko ifnot: order().Status() < @statusWaitAccountant -->
                                        <span data-bind="text: orderReasonText"></span>
                                        <!-- /ko -->
                                        <!-- /ko -->
                                    </td>
                                </tr>
                                <!-- /ko -->
                                <!-- ko if: orderReasonNoCodeOfLading() != null -->
                                <tr>
                                    <td>
                                        <b>Reason for more than 3 days has no bill of lading</b>
                                        <select class="form-control select-view mb10" style="width: 100%;" data-bind="options: listReasonNoCodeOfLading, optionsText: 'Text', optionsValue: 'Value', value: orderReasonNoCodeOfLadingId, optionsCaption: '-- Select reason for more than 3 days without the bill of lading --'"></select>
                                    </td>
                                </tr>
                                <!-- /ko -->
                                @*<!-- ko if: orderReasonNotEnoughInventory() != null -->
                                    <tr>
                                        <td>
                                            <b>Lý do quá 4 ngày chưa đủ kiện về kho</b>
                                            <select class="form-control select-view mb10" style="width: 100%;" data-bind="options: listReasonNotEnoughInventory, optionsText: 'Text', optionsValue: 'Value', value: orderReasonNotEnoughInventoryId, optionsCaption: '-- Chọn lý do quá 4 ngày chưa đủ kiện về kho --', disable: order().Status() >= @statusWaitAccountant "></select>
                                        </td>
                                    </tr>
                                    <!-- /ko -->*@
                            </tbody>
                        </table>
                        <!-- /ko -->
                    </div>

                    <div class="col-md-6">
                        <!-- ko if: order().Status() <= @orderWait -->
                        <table class="table-view">
                            <tbody>
                                <tr>
                                <tr>
                                    <td>Money order provisional (CNY)</td>
                                    <td data-bind="text: order().TotalPrice" colspan="2"></td>
                                </tr>
                            </tbody>
                        </table>
                                   <!-- /ko -->
                        <!-- ko if: order().Status() >= @statusOrder -->
                        <table class="table-view">
                            <thead>
                                <tr>
                                <tr>
                                    <th class="col-xs-3"></th>
                                    <th>Guest payment (CNY)</th>
                                    <th style="color: red">Company payment (CNY)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Tiền hàng (H)</td>
                                    <td><input type="text" disabled="disabled" class="text-right form-control decimalCN" data-bind="value: order().TotalPrice" autocomplete="off"></td>
                                    <td><input type="text" disabled="disabled" class="text-right form-control decimalCN" data-bind="value: order().PaidShop" autocomplete="off"></td>
                                </tr>
                                <tr>
                                                 <
                                    <td>Shipping fee (S)</td>
                                    <!-- ko ifnot: (@UserState.Type == 1 || @UserState.Type == 2) -->
                                    <td><input type="text" class="text-right form-control decimalCN" data-bind="value: order().FeeShip, valueUpdate: 'blur', event: { blur: updateOrder}, disable: @statusSuccess <= order().Status(), hasFocus: isSelectedFeeShip, css: cssFeeShip" autocomplete="off"></td>
                                    <td><input type="text" class="text-right form-control decimalCN" data-bind="value: order().FeeShipBargain, valueUpdate: 'blur', event: { blur: updateOrder}, disable: (@statusSuccess <= order().Status() || isDisableFeeShipBargain), hasFocus: isSelectedFeeShipBargain, css: cssFeeShipBargain" autocomplete="off"></td>
                                                  <!-- /ko -->
                                    <!-- ko if: (@UserState.Type == 1 || @UserState.Type == 2) -->
                                    <td><input type="text" class="text-right form-control decimalCN" data-bind="value: order().FeeShip, valueUpdate: 'blur', event: { blur: updateOrder}, disable: order().Status() > @inWarehouse, hasFocus: isSelectedFeeShip, css: cssFeeShip" autocomplete="off"></td>
                                    <td><input type="text" class="text-right form-control decimalCN" data-bind="value: order().FeeShipBargain, valueUpdate: 'blur', event: { blur: updateOrder}, disable: (order().Status() > @inWarehouse || isDisableFeeShipBargain), hasFocus: isSelectedFeeShipBargain, css: cssFeeShipBargain" autocomplete="off"></td>
                                    <!-- /ko -->
                                </tr>
                                <tr>
                                    <td>total money (T=H+S)</td>
                                    <td><input type="text" disabled="disabled" class="text-right form-control decimalCN" data-bind="value: order().TotalPriceCustomer" autocomplete="off"></td>
                                    <td><input type="text" disabled="disabled" class="text-right form-control decimalCN" data-bind="value: order().TotalShop" autocomplete="off"></td>
                                </tr>
                                <tr>
                                    <td>Money bargain (T1-T2)</td>
                                    <td colspan="2"><input type="text" disabled="disabled" class="text-right form-control" data-bind="value: order().PriceBargain" autocomplete="off"></td>
                                </tr>
                            </tbody>
                        </table>
                        <br />

                        <strong>
                            <span data-bind="text: '(Rates apply for daily orders: 1 yuan = ' + order().ExchangeRate() + ' Baht)'"></span>
                        </strong>
                        <div class="p5" style="border-bottom: 1px solid #D2D6DE; width: 100%"></div>
                        <div class="table-responsive">
                            <table class="table-view">
                                <tr>
                                    <td class="col-xs-6">Money order (Baht)</td>
                                    <td data-bind="text: order().TotalExchange" class="text-right"></td>
                                </tr>
                                <tr>
                                    <td>The total service fees (Baht)</td>
                                    <td data-bind="text: formatNumbericCN(totalPriceService(), 'N2')" class="text-right"></td>
                                </tr>
                                <tr>
                                    <td>Total Provisional money (Baht)</td>
                                    <td data-bind="text: order().Total" class="text-right"></td>
                                </tr>
                            </table>
                        </div>
                        <div class="p5" style="border-bottom: 1px solid #D2D6DE; width: 100%"></div>
                        <div class="table-responsive">
                            <table class="table-view">
                                <tr>
                                    <td>Deposited (Baht)</td>
                                    <td data-bind="text: orderExchange() == undefined ? '--' : formatNumbericCN(orderExchange().TotalPrice, 'N2')" class="text-right"></td>
                                </tr>
                                <tr>
                                    <td>The total amount of payment (Baht) @*<a data-bind="click: showExchangeOther, text: titleExchangeOther" href="javascript:;"></a>*@</td>
                                    <!-- ko ifnot: IsExchangeOther -->
                                    <td data-bind="text: formatNumbericCN( order().TotalPayed() - order().TotalRefunded() , 'N2')" class="text-right"></td>
                                    <!-- /ko -->
                                </tr>
                                @*<!-- ko if: IsExchangeOther -->
                                    <!-- ko foreach: listOrderExchage() -->
                                    <tr>
                                        <td data-bind="text: ModeName +' (Baht)'"></td>
                                        <td data-bind="text: formatNumbericCN(TotalPrice, 'N2')" class="text-right"></td>
                                    </tr>
                                    <!-- /ko -->
                                    <!-- /ko -->*@
                                <tr>
                                    <td><span data-bind="text: titleTotalCus"></span> (Baht)</td>
                                    <td data-bind="text: order().CashShortage" class="text-right" style="font-size: 18px; font-weight: 600; color: red"></td>
                                </tr>
                            </table>
                        </div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div data-bind="with: viewBoxChat" id="divShowBoxChat" class="col-md-4">
        <div data-bind="template: { name: templateChatId }"></div>
    </div>
</div>
<!-- ko if: order().Status() > @statusOrder -->
<div class="row importwarehouse">
    <div class="col-xs-12">
        <div class="form-horizontal">
            <div class="box-body">
                <!-- ko if: order().Status() < @orderCancel -->
                <div class="form-group">
                    <div class="col-sm-6">
                        <div class="input-group">
                            <input data-bind="value: codePackage, valueUpdate: 'afterkeydown', executeOnEnter: addPackage" type="text" class="form-control" placeholder="Enter the bill of lading">
                            <span class="input-group-btn">
                                <button data-bind="click: addPackage, enable: isSubmit" class="btn btn-info" type="button">
                                    <!-- ko if: isSubmit()-->
                                    <i class="fa fa-check"></i>
                                    <!-- /ko -->
                                    <!-- ko if: !isSubmit()-->
                                    <i class="fa fa-spinner fa-pulse fa-fw"></i>
                                    <!-- /ko -->
                                    Add the tracking code
                                </button>
                            </span>
                        </div>
                    </div>
                </div>
                <!-- /ko -->
                <span><strong class="strong-title">Package List :</strong></span>
                <span data-bind="if: listPackageView().length != 0">
                    <span colspan="10">
                        Đơn <b>
                            <strong data-bind="text: ReturnCode(order().Code())" style="color: red"></strong>
                        </b> have: <b data-bind="text: listPackageView().length"></b> kiện - the total actual weight:
                        <b data-bind="text: formatNumberic(_.sumBy(listPackageView(), function(o) { return  o.Weight;}),'N2')"></b> (kg)
                        - Total Weight conversion: <b data-bind="text: formatNumberic(_.sumBy(listPackageView(), function(o) { return  o.WeightConverted;}),'N2')"></b>(kg)
                        - Total Weight charged: <b data-bind="text: formatNumberic(_.sumBy(listPackageView(), function(o) { return  o.WeightActual;}),'N2')"></b>(kg)
                    </span>
                </span>
                <table class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <th class="text-center w-40">#</th>
                            <th class="text-center"><i class="fa fa-file"></i> Note</th>
                            <th class="text-center"><i class="fa fa-barcode"></i>Package ID</th>
                            <th class="text-center"><i class="fa fa-barcode"></i> Transport code</th>
                            <th class="text-center"><i class="fa fa-calendar"></i> Expected date of warehouse </th>
                            <th>Actual weight (kg) </th>
                            <th>Weight conversion (kg)</th>
                            <th>Weight to charge (kg) </th>
                            <th class="text-left w-200"><i class="fa fa-calendar"></i> Product Information Warehouse</th>
                            <th class="text-center"><i class="fa fa-thumb-tack"></i> Status</th>
                            <th></th>
                            <th class="text-center w-80"><i class="fa fa-hand-pointer-o"></i> Action </th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: listPackageView">
                        <tr>
                            <td data-bind="text: $index()+1" class="text-center"></td>
                            <td class="text-center">
                                <textarea data-bind="value: Note, enable:  $parent.order().Status() < @orderCancel" class="form-control auto-size" rows="2"></textarea>
                            </td>
                            <td class="text-center">
                                <a data-bind="text: 'P' + Code, click: packageDetailModelView.showModel.bind($data, Id)" href="javascript:;"></a>
                                @*<a data-bind="text: 'P' + Code" href="javascript:;"></a>*@
                            </td>
                            <td class="text-center">
                                <!-- ko if: Status == @orderPackage -->
                                <input data-bind="value: TransportCode, enable:  $parent.order().Status() < @orderCancel" class="form-control" />
                                <!-- /ko -->
                                <!-- ko ifnot: Status == @orderPackage -->
                                <span data-bind="text: TransportCode"></span>
                                <!-- /ko -->
                            </td>
                            <td class="text-center">
                                <!-- ko if: Status == @orderPackage -->
                                <!-- ko if: ForcastDate() !== '' -->
                                <input data-bind="value: ForcastDate, valueUpdate: 'blur', enable:  $parent.order().Status() < @orderCancel" class="form-control datepicker" />
                                <!-- /ko -->
                                <!-- /ko -->
                            </td>
                            <td data-bind="text: Weight"></td>
                            <td>
                                <span data-bind="text: WeightConverted"></span><br />
                                <!-- ko if: Size != null -->
                                <span data-bind="text: '(' + Size + ')'"></span>
                                <!-- /ko -->
                            </td>
                            <td data-bind="text: WeightActual"></td>
                            <td class="text-left">
                                <span data-bind="text: CurrentWarehouseName"></span><br />
                                <span data-bind="text: moment(LastUpdate).format('DD/MM/YYYY HH:mm')"></span>
                            </td>
                            <td class="text-center">
                                <span data-bind="text: statusApp.orderPackage[Status].Name, css: statusApp.orderPackage[Status].Class"></span>
                            </td>
                            <td>
                                <a data-bind="click: $parent.comment" class="btn btn-success" href="javascript:;"><i class="fa fa-comments"></i></a>
                            </td>
                            <td class="text-center">
                                <!-- ko if: Status == @orderPackage -->
                                <a data-bind="click: $parent.deletePackage" href="javascript:;" class="btn btn-danger btn-xs" data-toggle="tooltip" data-placement="left" title="Xóa mã vận đơn" data-original-title="Xóa mã vận đơn"><i class="fa fa-trash"></i></a>
                                <!-- /ko -->
                                @*<!-- ko if: Status < @chinaInStock -->
                                    <a data-bind="click: $parent.showForwardTransportCode" href="javascript:;" class="btn btn-info btn-xs" data-toggle="tooltip" data-placement="left" title="Chuyển mã vận đơn" data-original-title="Chuyển mã vận đơn"><i class="fa fa-reply"></i></a>
                                    <!-- /ko -->*@
                            </td>
                        </tr>
                    </tbody>
                    <tfoot data-bind="if: listPackageView().length == 0">
                        <tr>
                        <tr>
                            <td colspan="12">Currently no single carrier code!</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>
<!-- /ko -->

<div class="row">
    <div class="col-xs-12">
        <ul class="nav nav-tabs">
            <li class="active">
                <a data-toggle="tab" href="#history">
                    <strong class="strong-title">Order history:</strong>
                    <span data-bind="click: checkShowHistory" href="javascript:;" class="pull-right btn btn-info btn-xs ml15">
                        <!-- ko ifnot: isShowHistory -->
                       View <i class="fa fa-chevron-down"></i>
                        <!-- /ko -->
                        <!-- ko if: isShowHistory -->
                        Close <i class="fa fa-chevron-up"></i>
                        <!-- /ko -->
                    </span>
                </a>
            </li>
            <li>
                <a data-toggle="tab" href="#log">
                    <span>
                        <strong class="strong-title">Order processing history:</strong>
                        <span data-bind="click: checkShowLog" class="pull-right btn btn-info btn-xs ml15">
                            <!-- ko ifnot: isShowLog -->
                            View <i class="fa fa-chevron-down"></i>
                            <!-- /ko -->
                            <!-- ko if: isShowLog -->
                            Close <i class="fa fa-chevron-up"></i>
                            <!-- /ko -->
                        </span>
                    </span>
                </a>
            </li>
        </ul>

        <div class="tab-content">
            <div id="history" class="tab-pane fade in active">
                <ul class="timeline timeline-inverse">
                    <!-- ko if: isShowHistory -->
                    <!-- ko foreach: listHistory -->
                    <li>
                        <i data-bind="css: statusApp.order[Status].Ifa"></i>
                        <div class="timeline-item">
                            <span class="time"><i class="fa fa-calendar-check-o"></i> <span data-bind="text: moment(CreateDate).format('L LTS')"></span></span>
                            <!-- ko if: UserFullName == null -->
                            <h3 class="timeline-header no-border">
                                <a data-bind="text: CustomerName + ': '" href="javascript:;"></a> <span data-bind="html: Content"></span>
                            </h3>
                            <!-- /ko -->
                            <!-- ko ifnot: UserFullName == null -->
                            <h3 class="timeline-header no-border">
                                <a data-bind="text: UserFullName + ': '" href="javascript:;"></a> <span data-bind="html: Content"></span>
                            </h3>
                            <!-- /ko -->
                        </div>
                    </li>
                    <!-- /ko -->
                    <li>
                        <i class="fa fa-clock-o bg-gray"></i>
                    </li>
                    <!-- /ko -->
                </ul>
            </div>
            <div id="log" class="tab-pane fade">
                <!-- ko if: isShowLog -->
                <table class="table table-bordered table-responsive table-striped">
                    <thead>
                        <tr>
                            <th>Time </th>
                            <th>The operator</th>
                            <th>Title</th>
                            <th>Content </th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- ko foreach: listLog -->
                        <tr>
                            <td>
                                <span data-bind="text: moment(CreateDate).format('L LTS')"></span>
                            </td>
                            <td>
                                <span data-bind="text: UserFullName"></span>
                            </td>
                            <td>
                                <span data-bind="html: Content"></span>
                            </td>
                            <td>
                                <!-- ko if: Type == 1 -->
                                <table>
                                    <tr>
                                        <td data-bind="foreach: JSON.parse(DataBefore)" class="p10">
                                            <b data-bind="text: Name"></b>: <span data-bind="text: Value"></span><br />
                                        </td>
                                        <td class="p10"><i class="fa fa-long-arrow-right"></i></td>
                                        <td data-bind="foreach: JSON.parse(DataAfter)">
                                            <b data-bind="text: Name"></b>: <span data-bind="text: Value"></span><br />
                                        </td>
                                    </tr>
                                </table>
                                <!-- /ko -->
                            </td>
                        </tr>
                        <!-- /ko -->
                    </tbody>
                </table>
                <!-- /ko -->
            </div>
        </div>
    </div>
</div>
</div>
<div class="modal-footer">
    <div class="pull-left">
        Order staff:
        <!-- ko if: userOrder() !== null -->
        <b><span data-bind="text: userOrder().FullName + '-' + userOrder().TitleName"></span></b><i>(<span data-bind="text: userOrder().Email"></span>)</i>
        <!-- /ko-->
        <!-- ko ifnot: userOrder() !== null -->
        --
        <!-- /ko-->
    </div>


    <!-- ko if: order().Status() == @orderWait -->
    <button data-bind="click: orderWait" type="button" class="btn btn-success"><i class="fa fa-send"></i> price</button>
    <!-- /ko -->
    <!-- ko if: order().Status() == @statusOrder -->
    <button data-bind="click: orderSuccess" type="button" class="btn btn-success"><i class="fa fa-check"></i>Transfer payment accounting</button>

    <!-- /ko -->
    @if (delete)
    {
    <!-- ko if: order().Status() < @inWarehouse -->
    <button data-bind="click: orderClose.bind($data, ko.mapping.toJS(order))" type="button" class="btn btn-danger"><i class="fa fa-times"></i> Cancel</button>
            <!-- /ko -->
}
<button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i></button>
</div>
</div>

<div id="contractCodeModal" class="modal fade modal-dialog modal-p50" tabindex="-1" role="dialog">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title text-danger">Add code to the contract</h4>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-6">
                Contract code
                <input data-bind="value: contractCode" class="form-control" required />
            </div>
            <div class="col-md-6">
                Amount (CNY)
                <input data-bind="value: piceContractCode" class="text-right form-control decimalCN" required />
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button data-bind="click: addContractCode, enable: isSubmit" type="button" class="btn btn-primary">
            <!-- ko if: isSubmit()-->
            <i class="fa fa-check"></i>
            <!-- /ko -->
            <!-- ko if: !isSubmit()-->
            <i class="fa fa-spinner fa-pulse fa-fw"></i>
            <!-- /ko -->
            Confirm
        </button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    </div>
</div>

@*<div id="forwardTransportCode" class="modal fade modal-dialog modal-p50" tabindex="-1" data-backdrop="static" role="dialog">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title text-danger">Chuyển mã vận đơn <strong>#<span data-bind="text: forwardTransportCode()['TransportCode']"></span></strong></h4>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-md-12">
                    <input data-bind="value: fTCOrderCode" class="form-control" required placeholder="Nhập Orders code" />
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button data-bind="click: fTCForward, enable: isSubmit" type="button" class="btn btn-primary">
                <!-- ko if: isSubmit()-->
                <i class="fa fa-check"></i>
                <!-- /ko -->
                <!-- ko if: !isSubmit()-->
                <i class="fa fa-spinner fa-pulse fa-fw"></i>
                <!-- /ko -->
                Xác nhận
            </button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
    </div>*@

<div id="orderShop" class="modal fade modal-dialog modal-p50" tabindex="-1" role="dialog">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title text-danger">The list order of the same shop in 2 days</h4>
    </div>
    <div class="modal-body">
        <div class="row">
            <table class="table table-bordered table-responsive table-striped">
                <thead>
                    <tr>
                        <th class="w-40 text-center">#</th>
                        <th class="text-center">Code order</th>
                        <th class="text-center">Product Number</th>
                        <th class="text-center">Value (CNY)</th>
                        <th class="text-center">bargain (CNY)</th>
                        <th class="text-center">Staff process</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- ko foreach: listOrderShop -->
                    <tr>
                        <td data-bind="text: $index()+1" class="text-center"></td>
                        <td data-bind="text: ReturnCode(Code)"></td>
                        <td class="text-right" data-bind="text: formatNumbericCN(ProductNo, 'N0')"></td>
                        <td class="text-right" data-bind="text: formatNumbericCN(TotalPrice, 'N2')"></td>
                        <td class="text-right" data-bind="text: formatNumbericCN(PriceBargain, 'N2')"></td>
                        <td data-bind="text: UserFullName"></td>
                    </tr>
                    <!-- /ko-->
                </tbody>
            </table>
        </div>
    </div>
</div>

<div id="orderHistoryShop" class="modal fade modal-dialog modal-p50" tabindex="-1" role="dialog">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title text-danger">Top orders dealing with shop</h4>
    </div>
    <div class="modal-body">
        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#home">Bargain</a></li>
            <li><a data-toggle="tab" href="#menu1">Bargain rate / purchase money</a></li>
            <li><a data-toggle="tab" href="#menu2">Purchase money</a></li>
        </ul>

        <div class="tab-content">
            <div id="home" class="tab-pane fade in active">
                <table class="table table-bordered table-responsive table-striped">
                    <thead>
                        <tr>
                            <th class="w-40 text-center">#</th>
                            <th class="text-center">Code order</th>
                            <th class="text-center">Product Number</th>
                            <th class="text-center">Purchase money (CNY)</th>
                            <th class="text-center">Bargain (CNY)</th>
                            <th class="text-center">Processing staff</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- ko foreach: listBargain -->
                        <tr>
                            <td data-bind="text: $index()+1" class="text-center"></td>
                            <td data-bind="text: ReturnCode(Code)"></td>
                            <td class="text-right" data-bind="text: formatNumbericCN(ProductNo, 'N0')"></td>
                            <td class="text-right" data-bind="text: formatNumbericCN(PaidShop, 'N2')"></td>
                            <td class="text-right" data-bind="text: formatNumbericCN(PriceBargain, 'N2')"></td>
                            <td data-bind="text: UserFullName"></td>
                        </tr>
                        <!-- /ko-->
                    </tbody>
                </table>
            </div>
            <div id="menu1" class="tab-pane fade">
                <table class="table table-bordered table-responsive table-striped">
                    <thead>
                        <tr>
                            <th class="w-40 text-center">#</th>
                            <th class="text-center">Code order</th>
                            <th class="text-center">Product Number</th>
                            <th class="text-center">Purchase money (CNY)</th>
                            <th class="text-center">Bargain (CNY)</th>
                            <th class="text-center">Proportion (%)</th>
                            <th class="text-center">Processing staff</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- ko foreach: listRatioPrice -->
                        <tr>
                            <td data-bind="text: $index()+1" class="text-center"></td>
                            <td data-bind="text: ReturnCode(Code)"></td>
                            <td class="text-right" data-bind="text: formatNumbericCN(ProductNo, 'N0')"></td>
                            <td class="text-right" data-bind="text: formatNumbericCN(PaidShop, 'N2')"></td>
                            <td class="text-right" data-bind="text: formatNumbericCN(PriceBargain, 'N2')"></td>
                            <td class="text-right" data-bind="text: parseFloat(PriceBargain/PaidShop*100).toFixed(2)"></td>
                            <td data-bind="text: UserFullName"></td>
                        </tr>
                        <!-- /ko-->
                    </tbody>
                </table>
            </div>
            <div id="menu2" class="tab-pane fade">
                <table class="table table-bordered table-responsive table-striped">
                    <thead>
                        <tr>
                            <th class="w-40 text-center">#</th>
                            <th class="text-center">Code order</th>
                            <th class="text-center">Product Number</th>
                            <th class="text-center">Purchase money (CNY)</th>
                            <th class="text-center">Bargain (CNY)</th>
                            <th class="text-center">Processing staff</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- ko foreach: listPrice -->
                        <tr>
                            <td data-bind="text: $index()+1" class="text-center"></td>
                            <td data-bind="text: ReturnCode(Code)"></td>
                            <td class="text-right" data-bind="text: formatNumbericCN(ProductNo, 'N0')"></td>
                            <td class="text-right" data-bind="text: formatNumbericCN(PaidShop, 'N2')"></td>
                            <td class="text-right" data-bind="text: formatNumbericCN(PriceBargain, 'N2')"></td>
                            <td data-bind="text: UserFullName"></td>
                        </tr>
                        <!-- /ko-->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div id="update" class="modal modal-dialog modal-p90" tabindex="-1" data-backdrop="static" role="dialog" style="background: transparent !important; box-shadow: 0px 0px;">
    <div class="text-center">
        <div class="box-update">
            <span class="loader loader-quart-9"></span>
            Updating...
        </div>
    </div>
</div>
</form>

<style>
    #orderAddOrEditModal {
        padding: 0px 10px !important;
    }

        #orderAddOrEditModal .modal-lg {
            width: 90% !important;
        }

    .table-view {
        width: 100%;
    }

        .table-view td, .table-view th {
            padding: 1px;
        }

    .modal-backdrop {
        background: transparent;
    }
</style>
