@model string
@{
    var statusFinish = (byte)OrderStatus.Finish;
    var statusOrder = (byte)OrderStatus.Order;
    var statusWait = (byte)OrderStatus.AreQuotes;
    var orderWait = (byte)OrderStatus.AreQuotes;
    var orderDeposit = (byte)OrderStatus.WaitDeposit;
    var orderdetailCancel = (byte)OrderDetailStatus.Cancel;
}
<style>
    .table-view {
        width: 100%;
    }

        .table-view td, .table-view th {
            padding: 1px;
        }
</style>
<div id="@(Model == null ? "orderDetailModal" : Model)" class="modal fade modal-dialog modal-p90" tabindex="-1" @*data-backdrop="static"*@ role="dialog">
    <div class="modal-body">
        <div class="row">
            <div class="col-xs-9">
                <h2 class="order-header">
                    <i class="fa fa-file-code-o"></i> Order code: <strong data-bind="text: ReturnCode(order().Code)" style="color: red"></strong>
                    <!-- ko if: order().IsRetail -->
                    <i>[Odd row]</i>
                    <!-- /ko -->
                    <span data-bind="text: statusApp.order[order().Status == undefined ? 0 : order().Status].Name, css: statusApp.order[order().Status == undefined ? 0 : order().Status].Class"></span>
                    <!-- ko if: mess() !== "" -->
                    <span class="text-yellow"><i class="fa fa-exclamation-triangle"></i> <span data-bind="text: mess"></span> <a data-bind="click: showOrderShop" href="javascript:;">See the list</a></span>
                    <!-- /ko -->
                </h2>
            </div>
            <div class="col-xs-3">
                <button type="button" class="btn btn-default pull-right ml15" data-dismiss="modal"><b>x</b></button>
                <h2 class="order-header pull-right">
                    <small data-bind="text: 'Start Date :' + moment(order().Created).format('DD/MM/YYYY')" class="pull-right"></small><br />
                    <!-- ko if: order().Status !== @statusFinish-->
                    <small class="pull-right"> Completed: --/--/----</small>
                    <!-- /ko -->
                    <!-- ko if: order().Status == @statusFinish-->
                    <small data-bind="text: 'Date of completion: ' + moment(order().LastUpdate).format('DD/MM/YYYY')" class="pull-right"></small>
                    <!-- /ko -->
                </h2>
            </div>
        </div>
        <div class="row importwarehouse">
            <div class="col-md-4">
                <strong class="strong-title"> Customer Information </strong>
                <div>
                    <!-- ko if: customer() != null -->
                    <table class="table">
                        <tr>
                            <th class="w-40"><i class="fa fa-user"></i></th>
                            <td>
                                <span data-bind="text: order().LevelName" class="label label-danger"></span>
                                <span data-bind="text: order().CustomerName"></span>
                            </td>
                        </tr>
                        <tr>
                            <th><i class="fa fa-envelope-o"></i></th>
                            <td data-bind="text: order().CustomerEmail"></td>
                        </tr>
                        <tr>
                            <th><i class="fa fa-phone"></i></th>
                            <td data-bind="text: order().CustomerPhone"></td>
                        </tr>
                        <tr>
                            <th><i class="fa fa-map-marker"></i></th>
                            <!-- ko if: customerFormAddress() != null -->
                            <td data-bind="text: customerFormAddress().Address +', '+ customerFormAddress().WardName +', '+ customerFormAddress().DistrictName +', '+ customerFormAddress().ProvinceName"></td>
                            <!-- /ko -->
                            <!-- ko ifnot: customerFormAddress() != null -->
                            <td></td>
                            <!-- /ko -->
                        </tr>
                    </table>
                    <!-- /ko -->
                </div>
            </div>
            @*<div class="col-md-4">
                    <strong class="strong-title">Thông tin người nhận</strong>
                    <div>
                        <!-- ko if: customerToAddress() != null -->
                        <table class="table">
                            <tr>
                                <th class="w-40"><i class="fa fa-user"></i></th>
                                <td data-bind="text: customerToAddress().FullName"></td>
                            </tr>
                            <tr>
                                <th><i class="fa fa-phone"></i></th>
                                <td data-bind="text: customerToAddress().Phone"></td>
                            </tr>
                            <tr>
                                <th><i class="fa fa-map-marker"></i></th>
                                <!-- ko if: customerFormAddress() != null -->
                                <td data-bind="text: customerToAddress().Address +', '+ customerToAddress().WardName +', '+ customerToAddress().DistrictName +', '+ customerToAddress().ProvinceName"></td>
                                <!-- /ko -->
                            </tr>
                        </table>
                        <!-- /ko -->
                    </div>
                </div>*@
            <div class="col-md-4">
                <strong class="strong-title">More information</strong>
                <div>
                    <table class="table">
                        <tr>
                            <th>Website</th>
                            <td>
                                <a href="javascript:;">
                                    <strong data-bind="text: order().WebsiteName"></strong>
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <th>Shop</th>
                            <td>
                                <a href="javascript:;">
                                    <strong data-bind="text: order().ShopName"></strong>
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <th>Exchange rate is applied</th>
                            <td data-bind="text: '1 CNY = ' + formatNumbericCN(order().ExchangeRate, 'N2') + ' Baht'"></td>
                        </tr>
                        <!-- ko if: customer() != null -->
                        <tr>
                            <th>Warehouse customers about</th>
                            <td data-bind="text: order().WarehouseDeliveryName"></td>
                        </tr>
                        <tr>
                            <th>Identifier</th>
                            <td data-bind="text: codeOw"></td>
                        </tr>
                        <!-- /ko -->
                    </table>
                </div>
            </div>
            <div class="col-md-4">
                <div class="box-order">
                    <div class="box-header with-border">
                        <i class="fa fa-bullhorn"></i>
                        <h3 class="box-title">Guest notes</h3>
                    </div>
                    <div class="box-body">
                        <div style="overflow: hidden;">
                            <!-- ko if: order().Note == null -->
                            ---
                            <!-- /ko -->
                            <!-- ko ifnot: order().Note == null -->
                            <p data-bind="text: order().Note"></p>
                            <!-- /ko -->
                        </div>
                    </div>
                </div>

                <div class="box-order">
                    <div class="box-header with-border">
                        <i class="fa fa-bullhorn"></i>
                        <h3 class="box-title">Staff notes</h3>
                    </div>
                    <div class="box-body">
                        <div>
                            <!-- ko if: order().UserNote == null -->
                            ---
                            <!-- /ko -->
                            <!-- ko ifnot: order().UserNote == null -->
                            <p data-bind="text: order().UserNote"></p>
                            <!-- /ko -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row importwarehouse">
            <div class="col-sm-12 invoice-col">
                <div class="form-group">
                    <b class="strong-title">Service is in use: </b>
                    <div data-bind="foreach:  listOrderService">
                        <label style="margin-right:10px;">
                            <!-- ko if: Checked == 0 -->
                            <i style="font-size: 19px; margin: 4px; color:red" class="fa fa-square-o"></i><span data-bind="text: ServiceName"></span>
                            <br />
                            <span class="pull-right">0 Baht</span>
                            <!-- /ko -->
                            <!-- ko ifnot: Checked == 0 -->
                            <i style="font-size: 19px; margin: 4px; color:forestgreen" class="fa fa-check-square-o"></i><span data-bind="text: ServiceName"></span>
                            <br />
                            <span data-bind="text: formatNumbericCN(TotalPrice, 'N2') + ' Baht'" class="pull-right"></span>
                            <!-- /ko -->
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <div class="row importwarehouse">
            <div class="col-xs-12 table-responsive">
                <div data-bind="css: isDetailRending() == true? 'display-none' : ''">
                    <div class="spinner">
                        <div class="rect1"></div>
                        <div class="rect2"></div>
                        <div class="rect3"></div>
                        <div class="rect4"></div>
                        <div class="rect5"></div>
                    </div>
                </div>
                <div data-bind="css: isDetailRending() == true? '' : 'display-none'" class="display-none">
                    <b class="strong-title">Detail order: </b>
                    <span data-bind="if: listDetail().length != 0">
                            <span colspan="10"> Total link: <b data-bind="text: listDetail().length"></b>
                         - Total customer order: <b data-bind="text: formatNumbericCN(_.sumBy(listDetail(), function(o) { return  Globalize.parseFloat(o.Quantity + ''); }),'N0')"></b> 
                        - Total product set: <b data-bind="text: formatNumbericCN(_.sumBy(listDetail(), function(o) { return  o.Status != 1 ? Globalize.parseFloat(o.QuantityBooked + '') : 0; }),'N0')"></b></span>
                    </span>
                    <table class="table table-bordered table-hover">
                        <thead>
                            <tr>
                                <th class="text-center">#</th>
                                <th class="text-center"><i class="fa fa-image"></i>Image</th>
                                <th class="text-center w-250"><i class="fa fa-cube"></i> Product name</th>
                                <th class="text-center"><i class="fa fa-exclamation-circle"></i>Property</th>
                                @*<th class="text-center"><i class="fa fa-sticky-note-o"></i> Miêu tả</th>*@
                                <th class="text-center" style="color: blue"><i class="fa fa-cubes"></i> Order customer</th>
                                <th class="text-center" style="color: blue"><i class="fa fa-cubes"></i> achieved</th>
                                <th class="text-center" style="color: blue"><i class="fa fa-cubes"></i> Actual amount received</th>
                                <th class="text-center" style="color: red"><i class="fa fa-money"></i> Product price (CNY)</th>
                                <th class="text-center" style="color: red"><i class="fa fa-superscript"></i> Total (CNY)</th>
                                <th class="text-center"><i class="fa fa-file"></i> Note</th>
                                <th class="text-center"><i class="fa fa-thumb-tack"></i> Status</th>
                            </tr>
                        </thead>
                        <tbody data-bind="foreach: listDetail">
                            <tr>
                                <td data-bind="text: $index()+1" class="text-center"></td>
                                <td class="text-center">
                                    <img data-bind="attr: { src: Image}" style="width: 50px;">
                                </td>
                                <td>
                                    <a data-bind="text: Name + ' => View', attr: { href: Link}" href="javascript:;" target="_blank"></a><br />
                                    <!-- ko if: Note !== null -->
                                    <span data-bind="text: '( ' + Note + ' )'"></span>
                                    <!-- /ko -->
                                </td>
                                <!-- ko if: (Properties != '' && Properties != '[]' ) -->
                                <td data-bind="foreach: JSON.parse(Properties)">
                                    <span data-bind="text: Label"></span>: <span data-bind="text: Text"></span><br /><br />
                                </td>
                                <!-- /ko -->
                                <!-- ko ifnot: (Properties != '' && Properties != '[]' ) -->
                                <td>
                                    Color: <span data-bind="text: Color"></span><br /><br />
                                    Size: <span data-bind="text: Size"></span>
                                </td>
                                <!-- /ko -->
                                @*<td data-bind="text: Note"></td>*@
                                <td data-bind="text: formatNumbericCN(Quantity, 'N2')" class="text-center"></td>
                                <!-- ko if: Status != @orderdetailCancel -->
                                <td data-bind="text: formatNumbericCN(QuantityBooked, 'N2')" class="text-center"></td>
                                <!-- /ko -->
                                <!-- ko ifnot: Status != @orderdetailCancel -->
                                <td class="text-center">0</td>
                                <!-- /ko -->
                                <!-- ko if: Status != @orderdetailCancel -->
                                <td data-bind="text: formatNumbericCN(QuantityActuallyReceived, 'N2')" class="text-center"></td>
                                <!-- /ko -->
                                <!-- ko ifnot: Status != @orderdetailCancel -->
                                <td class="text-center">0</td>
                                <!-- /ko -->
                                <td data-bind="text: formatNumbericCN(Price, 'N2')" class="text-center"></td>
                                <td data-bind="text: formatNumbericCN(TotalPrice, 'N2')" class="text-center"></td>
                                <td data-bind="html: UserNote"></td>
                                <td class="text-center">
                                    <span data-bind="text: statusApp.orderDetail[Status == undefined ? 0 : Status].Name, css: statusApp.orderDetail[Status == undefined ? 0 : Status].Class"></span>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot data-bind="if: listDetail().length == 0">
                            <tr>
                                <td colspan="10">Order does not have transactional details</td>
                            </tr>
                        </tfoot>
                        
                    </table>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <span><strong class="strong-title">Order staff handle:</strong></span>
                <!-- ko if: userOrder() !== null -->
                <b><span class="text-red" data-bind="text: userOrder().FullName + '-' + userOrder().TitleName"></span></b> <i>(<span data-bind="text: userOrder().Email"></span>)</i>
                <!-- /ko-->
                <!-- ko ifnot: userOrder() !== null -->
                --
                <!-- /ko-->
            </div>
        </div>
        <div class="row importwarehouse">
            <div class="col-md-8">
                <div class="form-horizontal">
                    <div class="box-body">
                        <div class="form-group">
                            <div class="col-md-6">
                                <table class="table-view">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <b>Warehouse TQ</b><br />
                                                <span data-bind="text: order().WarehouseName"></span>
                                            </td>
                                        </tr>
                                        <!-- ko if: order().Status >= @statusOrder -->
                                        <tr>
                                            <td>
                                                <table class="table table-bordered">
                                                    <thead>
                                                        <tr>
                                                            <th class="text-center w-40">#</th>
                                                            <th class="text-center"><i class="fa fa-barcode"></i> Contract ID</th>
                                                            <th class="text-center">
                                                                <i class="fa fa-money"></i> Money (CNY)<br />
                                                                <i>Money + Money Ship</i>
                                                            </th>
                                                            <th class="text-center"><i class="fa fa-thumb-tack"></i> Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody data-bind="foreach: listContractCode">
                                                        <tr>
                                                            <td data-bind="text: $index()+1" class="text-center"></td>
                                                            <td data-bind="text: ContractCode" class="text-center"></td>
                                                            <td data-bind="text: TotalPrice" class="text-center"></td>
                                                            <td class="text-center">
                                                                <span data-bind="text: statusApp.statusContractCode[Status].Name, css: statusApp.statusContractCode[Status].Class"></span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>
                                        <!-- /ko -->
                                        <!-- ko if: orderReason() != null -->
                                        <tr>
                                            <td>
                                                <b>Reason for slow processing: </b>
                                                <span data-bind="text: orderReason().Reason"></span>
                                            </td>
                                        </tr>
                                        <!-- /ko -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <!-- ko if: order().Status <= @orderWait -->
                                <table class="table-view">
                                    <tbody>
                                        <tr>
                                            <td>Temporary cash (CNY)</td>
                                            <td data-bind="text: order().TotalPrice" colspan="2"></td>
                                        </tr>
                                    </tbody>
                                </table>

                                <!-- /ko -->
                                <!-- ko if: order().Status >= @orderDeposit -->
                                <table class="table-view detail-table">
                                    <thead>
                                        <tr>
                                            <th class="col-xs-3"></th>
                                            <th class="text-right" style="border-right: 1px solid #D2D6DE">Guest payment (CNY)</th>
                                            <th class="text-right" style="color: red">Company payment (CNY)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Money(H)</td>
                                            <td data-bind="text:  formatNumbericCN(order().TotalPrice, 'N2')" class="text-right" style="border-right: 1px solid #D2D6DE"></td>
                                            <td data-bind="text:  formatNumbericCN(order().PaidShop == null ? 0 : order().PaidShop, 'N2')" class="text-right"></td>
                                        </tr>
                                        <tr>
                                            <td>Shipping fee (S)</td>
                                            <td data-bind="text:  formatNumbericCN(order().FeeShip == null ? 0 : order().FeeShip, 'N2')" class="text-right" style="border-right: 1px solid #D2D6DE"></td>
                                            <td data-bind="text:  formatNumbericCN(order().FeeShipBargain  == null ? 0 : order().FeeShipBargain, 'N2')" class="text-right"></td>
                                        </tr>
                                        <tr>
                                            <td>Total money(T=H+S)</td>
                                            <td data-bind="text: totalPriceCustomer" class="text-right" style="border-right: 1px solid #D2D6DE"></td>
                                            <td data-bind="text: totalShop" class="text-right"></td>
                                        </tr>
                                        <tr>
                                            <td>Money bargain(T1-T2)</td>
                                            <td data-bind="text: order().PriceBargain == null ? 0 : order().PriceBargain" class="text-right" colspan="2"></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <br />
                                <strong>
                                    <span data-bind="text: '(Rates apply for daily orders: 1 yuan = ' + formatNumbericCN(order().ExchangeRate, 'N2') + ' Baht)'"></span>
                                </strong>
                                <div class="p5" style="border-bottom: 1px solid #D2D6DE; width: 100%"></div>
                                <div class="table-responsive">
                                    <table class="table-view">
                                        <tr>
                                            <td class="col-xs-6">Money (Baht)</td>
                                            <td data-bind="text: formatNumbericCN(order().TotalExchange, 'N2')" class="text-right"></td>
                                        </tr>
                                        <tr>
                                            <td>Total service charge (Baht)</td>
                                            <td data-bind="text: formatNumbericCN(totalPriceService(), 'N2')" class="text-right"></td>
                                        </tr>
                                        <tr>
                                            <td>Total amount is temporarily calculated (Baht)</td>
                                            <td data-bind="text: formatNumbericCN(order().Total, 'N2')" class="text-right"></td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="p5" style="border-bottom: 1px solid #D2D6DE; width: 100%"></div>
                                <div class="table-responsive">
                                    <table class="table-view">
                                        <tr>
                                            <td>Deposited (Baht)</td>
                                            <td data-bind="text: (orderExchange() == undefined || orderExchange()==null) ? '--' : formatNumbericCN(orderExchange().TotalPrice, 'N2')" class="text-right"></td>
                                        </tr>
                                        <tr>
                                            <td>Total payment (Baht) @*<a data-bind="click: showExchangeOther, text: titleExchangeOther" href="javascript:;"></a>*@</td>
                                            <!-- ko ifnot: IsExchangeOther -->
                                            <td data-bind="text: formatNumbericCN( order().TotalPayed - order().TotalRefunded , 'N2')" class="text-right"></td>
                                            <!-- /ko -->
                                        </tr>
                                        @*<!-- ko if: IsExchangeOther -->
                                            <!-- ko foreach: listOrderExchage() -->
                                            <tr>
                                                <td data-bind="text: ModeName +' (Baht)'"></td>
                                                <td data-bind="text: formatNumbericCN(TotalPrice, 'N2')" class="text-right"></td>
                                            </tr>
                                            <!-- /ko -->
                                            <!-- /ko -->*@
                                        <tr>
                                            <td><span data-bind="text: titleTotalCus"></span> (Baht)</td>
                                            <td data-bind="text: cashShortage" class="text-right" style="font-size: 18px; font-weight: 600; color: red"></td>
                                        </tr>
                                    </table>
                                </div>
                                <!-- /ko -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div data-bind="with: viewBoxChat" id="divShowBoxChat" class="col-md-4">
                <div data-bind="template: { name: templateChatId }"></div>
            </div>
        </div>

        <!-- ko if: order().Status > @statusOrder -->
        <div class="row">
            <div class="col-xs-12">
                <div class="form-horizontal">
                    <div class="box-body">
                        <span><strong class="strong-title">Package list :</strong></span>
                        <span data-bind="if: listPackageView().length != 0">
                            <span colspan="10"> Petition <b>
                                <strong data-bind="text: ReturnCode(order().Code)" style="color: red"></strong>
                                </b> have: <b data-bind="text: listPackageView().length"></b> package - Total actual weight: 
                            <b data-bind="text: formatNumberic(_.sumBy(listPackageView(), function(o) { return  o.Weight;}),'N2')"></b> (kg)
                            - Total weight converted: <b data-bind="text: formatNumberic(_.sumBy(listPackageView(), function(o) { return  o.WeightConverted;}),'N2')"></b>(kg)
                                - Total weight charged: <b data-bind="text: formatNumberic(_.sumBy(listPackageView(), function(o) { return  o.WeightActual;}),'N2')"></b>(kg)
                            </span>
                        </span>
                        <table class="table table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th class="text-center w-40">#</th>
                                    <th class="text-center"><i class="fa fa-file"></i> Note</th>
                                    <th class="text-center"><i class="fa fa-barcode"></i> Package ID</th>
                                    <th class="text-center w-300"><i class="fa fa-barcode"></i> Transport code</th>
                                    <th class="text-center w-300"><i class="fa fa-calendar"></i>Expected date of storage </th>
                                    <th class="text-left w-200"><i class="fa fa-calendar"></i> Information package</th>
                                    <th>Total actual weight </th>
                                    <th>Total weight converted (kg)</th>
                                    <th>Total weight charged </th>
                                    <th class="text-center"><i class="fa fa-thumb-tack"></i> Status</th>
                                </tr>
                            </thead>
                            <tbody data-bind="foreach: listPackageView">
                                <tr>
                                    <td data-bind="text: $index()+1" class="text-center"></td>
                                    <td data-bind="text: Note" class="text-center"></td>
                                    <td class="text-center">
                                        <a data-bind="text: 'P' + Code, click: packageDetailModelView.showModel.bind($data, Id)" href="javascript:;"></a>
                                    </td>
                                    <td data-bind="text: TransportCode" class="text-center"></td>
                                    <td data-bind="text: ForcastDate == null? '':  moment(ForcastDate).format('DD/MM/YYYY')" class="text-center"></td>
                                    <td class="text-left">
                                        <span data-bind="text: CurrentWarehouseName"></span><br />
                                        <span data-bind="text: moment(LastUpdate).format('DD/MM/YYYY HH:mm')"></span>
                                    </td>
                                    <td data-bind="text: Weight"></td>
                                    <td>
                                        <span data-bind="text: WeightConverted"></span><br />
                                        <!-- ko if: Size != null -->
                                        <span data-bind="text: '(' + Size + ')'"></span>
                                        <!-- /ko -->
                                    </td>
                                    <td data-bind="text: WeightActual"></td>
                                    <td class="text-center">
                                        <span data-bind="text: statusApp.orderPackage[Status].Name, css: statusApp.orderPackage[Status].Class"></span>
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot data-bind="if: listPackageView().length == 0">
                                <tr>
                                    <td colspan="6">No shipment yet</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- /ko -->
        <div class="row">
            <div class="col-xs-12">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a data-toggle="tab" href="#historyShow">
                            <strong class="strong-title">Order history:</strong>
                            <span data-bind="click: checkShowHistory" href="javascript:;" class="pull-right btn btn-info btn-xs ml15">
                                <!-- ko ifnot: isShowHistory -->
                               View <i class="fa fa-chevron-down"></i>
                                <!-- /ko -->
                                <!-- ko if: isShowHistory -->
                               Close <i class="fa fa-chevron-up"></i>
                                <!-- /ko -->
                            </span>
                        </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#logShow">
                            <span>
                                <strong class="strong-title">Transaction history:</strong>
                                <span data-bind="click: checkShowLog" class="pull-right btn btn-info btn-xs ml15">
                                    <!-- ko ifnot: isShowLog -->
                                   View <i class="fa fa-chevron-down"></i>
                                    <!-- /ko -->
                                    <!-- ko if: isShowLog -->
                                   Close <i class="fa fa-chevron-up"></i>
                                    <!-- /ko -->
                                </span>
                            </span>
                        </a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div id="historyShow" class="tab-pane fade in active">
                        <ul class="timeline timeline-inverse">
                            <!-- ko if: isShowHistory -->
                            <!-- ko foreach: listHistory -->
                            <li>
                                <i data-bind="css: statusApp.order[Status].Ifa"></i>
                                <div class="timeline-item">
                                    <span class="time"><i class="fa fa-calendar-check-o"></i> <span data-bind="text: moment(CreateDate).format('L LTS')"></span></span>
                                    <!-- ko if: UserFullName == null -->
                                    <h3 class="timeline-header no-border">
                                        <a data-bind="text: CustomerName + ': '" href="javascript:;"></a> <span data-bind="html: Content"></span>
                                    </h3>
                                    <!-- /ko -->
                                    <!-- ko ifnot: UserFullName == null -->
                                    <h3 class="timeline-header no-border">
                                        <a data-bind="text: UserFullName + ': '" href="javascript:;"></a> <span data-bind="html: Content"></span>
                                    </h3>
                                    <!-- /ko -->
                                </div>
                            </li>
                            <!-- /ko -->
                            <li>
                                <i class="fa fa-clock-o bg-gray"></i>
                            </li>
                            <!-- /ko -->
                        </ul>
                    </div>
                    <div id="logShow" class="tab-pane fade">
                        <!-- ko if: isShowLog -->
                        <table class="table table-bordered table-responsive table-striped">
                            <thead>
                                <tr>
                                    <th>Time </th>
                                    <th>The operator</th>
                                    <th>Title</th>
                                    <th>Content </th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- ko foreach: listLog -->
                                <tr>
                                    <td>
                                        <span data-bind="text: moment(CreateDate).format('L LTS')"></span>
                                    </td>
                                    <td>
                                        <span data-bind="text: UserFullName"></span>
                                    </td>
                                    <td>
                                        <span data-bind="html: Content"></span>
                                    </td>
                                    <td>
                                        <!-- ko if: Type == 1 -->
                                        <table>
                                            <tr>
                                                <td data-bind="foreach: JSON.parse(DataBefore)" class="p10">
                                                    <b data-bind="text: Name"></b>: <span data-bind="text: Value"></span><br />
                                                </td>
                                                <td class="p10"><i class="fa fa-long-arrow-right"></i></td>
                                                <td data-bind="foreach: JSON.parse(DataAfter)">
                                                    <b data-bind="text: Name"></b>: <span data-bind="text: Value"></span><br />
                                                </td>
                                            </tr>
                                        </table>
                                        <!-- /ko -->
                                    </td>
                                </tr>
                                <!-- /ko -->
                            </tbody>
                        </table>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
        </div>

        <div id="orderShopView" class="modal fade modal-dialog modal-p50" tabindex="-1" role="dialog">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title text-danger">List of order same shop in recent 2 days</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <table class="table table-bordered table-responsive table-striped">
                        <thead>
                            <tr>
                                <th class="w-40 text-center">#</th>
                                <th class="text-center">Code order</th>
                                <th class="text-center">Product Number</th>
                                <th class="text-center">Value</th>
                                <th class="text-center">Bargain</th>
                                <th class="text-center">Processing staff</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- ko foreach: listOrderShop -->
                            <tr>
                                <td data-bind="text: $index()+1" class="text-center"></td>
                                <td data-bind="text: ReturnCode(Code)"></td>
                                <td data-bind="text: formatNumbericCN(ProductNo, 'N0')"></td>
                                <td class="text-right" data-bind="text: formatNumbericCN(TotalPrice, 'N2')"></td>
                                <td class="text-right" data-bind="text: formatNumbericCN(PriceBargain, 'N2')"></td>
                                <td data-bind="text: UserFullName"></td>
                            </tr>
                            <!-- /ko-->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
    <div class="modal-footer">
        <div class="pull-left">
            Order staff:
            <!-- ko if: userOrder() !== null -->
            <b><span data-bind="text: userOrder().FullName + '-' + userOrder().TitleName"></span></b><i>(<span data-bind="text: userOrder().Email"></span>)</i>
            <!-- /ko-->
            <!-- ko ifnot: userOrder() !== null -->
            --
            <!-- /ko-->
        </div>
        <div class="pull-left">
            &nbsp;&nbsp;Customer Service staff:
            <!-- ko if: order().CustomerCareFullName !== null -->
            <b><span data-bind="text: order().CustomerCareFullName"></span></b><i>(<span data-bind="text: order().CustomerCareName"></span>)</i>
            <!-- /ko-->
            <!-- ko ifnot: order().CustomerCareFullName !== null -->
            --
            <!-- /ko-->
        </div>
        <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i>Close</button>
    </div>
</div>
<style>
    .detail-table tr {
        border-bottom: 1px solid #D2D6DE;
    }
</style>